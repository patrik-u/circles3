(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const gr=(t,e)=>t===e,he=Symbol("solid-proxy"),Jt=Symbol("solid-track"),Xe={equals:gr};let Fn=Yn;const le=1,ze=2,Jn={owned:null,cleanups:null,context:null,owner:null};var F=null;let Et=null,q=null,V=null,oe=null,rt=0;function He(t,e){const r=q,a=F,n=t.length===0,i=n?Jn:{owned:null,cleanups:null,context:null,owner:e===void 0?a:e},o=n?t:()=>t(()=>ne(()=>it(i)));F=i,q=null;try{return ce(o,!0)}finally{q=r,F=a}}function H(t,e){e=e?Object.assign({},Xe,e):Xe;const r={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},a=n=>(typeof n=="function"&&(n=n(r.value)),zn(r,n));return[Xn.bind(r),a]}function te(t,e,r){const a=Qt(t,e,!1,le);Te(a)}function De(t,e,r){Fn=Or;const a=Qt(t,e,!1,le);(!r||!r.render)&&(a.user=!0),oe?oe.push(a):Te(a)}function Q(t,e,r){r=r?Object.assign({},Xe,r):Xe;const a=Qt(t,e,!0,0);return a.observers=null,a.observerSlots=null,a.comparator=r.equals||void 0,Te(a),Xn.bind(a)}function vr(t){return ce(t,!1)}function ne(t){if(q===null)return t();const e=q;q=null;try{return t()}finally{q=e}}function yr(t,e,r){const a=Array.isArray(t);let n,i=r&&r.defer;return o=>{let l;if(a){l=Array(t.length);for(let c=0;c<t.length;c++)l[c]=t[c]()}else l=t();if(i){i=!1;return}const h=ne(()=>e(l,n,o));return n=l,h}}function _e(t){return F===null||(F.cleanups===null?F.cleanups=[t]:F.cleanups.push(t)),t}function Hn(){return q}function mr(){return F}function br(t,e){const r=F,a=q;F=t,q=null;try{return ce(e,!0)}catch(n){en(n)}finally{F=r,q=a}}function wr(t){const e=q,r=F;return Promise.resolve().then(()=>{q=e,F=r;let a;return ce(t,!1),q=F=null,a?a.done:void 0})}function Vn(t,e){const r=Symbol("context");return{id:r,Provider:kr(r),defaultValue:t}}function _r(t){let e;return(e=Qn(F,t.id))!==void 0?e:t.defaultValue}function $r(t){const e=Q(t),r=Q(()=>Ht(e()));return r.toArray=()=>{const a=r();return Array.isArray(a)?a:a!=null?[a]:[]},r}function Xn(){if(this.sources&&this.state)if(this.state===le)Te(this);else{const t=V;V=null,ce(()=>Ze(this),!1),V=t}if(q){const t=this.observers?this.observers.length:0;q.sources?(q.sources.push(this),q.sourceSlots.push(t)):(q.sources=[this],q.sourceSlots=[t]),this.observers?(this.observers.push(q),this.observerSlots.push(q.sources.length-1)):(this.observers=[q],this.observerSlots=[q.sources.length-1])}return this.value}function zn(t,e,r){let a=t.value;return(!t.comparator||!t.comparator(a,e))&&(t.value=e,t.observers&&t.observers.length&&ce(()=>{for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n],o=Et&&Et.running;o&&Et.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?V.push(i):oe.push(i),i.observers&&Zn(i)),o||(i.state=le)}if(V.length>1e6)throw V=[],new Error},!1)),e}function Te(t){if(!t.fn)return;it(t);const e=F,r=q,a=rt;q=F=t,Sr(t,t.value,a),q=r,F=e}function Sr(t,e,r){let a;try{a=t.fn(e)}catch(n){return t.pure&&(t.state=le,t.owned&&t.owned.forEach(it),t.owned=null),t.updatedAt=r+1,en(n)}(!t.updatedAt||t.updatedAt<=r)&&(t.updatedAt!=null&&"observers"in t?zn(t,a):t.value=a,t.updatedAt=r)}function Qt(t,e,r,a=le,n){const i={fn:t,state:a,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:F,context:null,pure:r};return F===null||F!==Jn&&(F.owned?F.owned.push(i):F.owned=[i]),i}function Ye(t){if(t.state===0)return;if(t.state===ze)return Ze(t);if(t.suspense&&ne(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<rt);)t.state&&e.push(t);for(let r=e.length-1;r>=0;r--)if(t=e[r],t.state===le)Te(t);else if(t.state===ze){const a=V;V=null,ce(()=>Ze(t,e[0]),!1),V=a}}function ce(t,e){if(V)return t();let r=!1;e||(V=[]),oe?r=!0:oe=[],rt++;try{const a=t();return Ar(r),a}catch(a){r||(oe=null),V=null,en(a)}}function Ar(t){if(V&&(Yn(V),V=null),t)return;const e=oe;oe=null,e.length&&ce(()=>Fn(e),!1)}function Yn(t){for(let e=0;e<t.length;e++)Ye(t[e])}function Or(t){let e,r=0;for(e=0;e<t.length;e++){const a=t[e];a.user?t[r++]=a:Ye(a)}for(e=0;e<r;e++)Ye(t[e])}function Ze(t,e){t.state=0;for(let r=0;r<t.sources.length;r+=1){const a=t.sources[r];if(a.sources){const n=a.state;n===le?a!==e&&(!a.updatedAt||a.updatedAt<rt)&&Ye(a):n===ze&&Ze(a,e)}}}function Zn(t){for(let e=0;e<t.observers.length;e+=1){const r=t.observers[e];r.state||(r.state=ze,r.pure?V.push(r):oe.push(r),r.observers&&Zn(r))}}function it(t){let e;if(t.sources)for(;t.sources.length;){const r=t.sources.pop(),a=t.sourceSlots.pop(),n=r.observers;if(n&&n.length){const i=n.pop(),o=r.observerSlots.pop();a<n.length&&(i.sourceSlots[o]=a,n[a]=i,r.observerSlots[a]=o)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)it(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function en(t){throw t}function Qn(t,e){return t?t.context&&t.context[e]!==void 0?t.context[e]:Qn(t.owner,e):void 0}function Ht(t){if(typeof t=="function"&&!t.length)return Ht(t());if(Array.isArray(t)){const e=[];for(let r=0;r<t.length;r++){const a=Ht(t[r]);Array.isArray(a)?e.push.apply(e,a):e.push(a)}return e}return t}function kr(t,e){return function(a){let n;return te(()=>n=ne(()=>(F.context={[t]:a.value},$r(()=>a.children))),void 0),n}}const Dr=Symbol("fallback");function pn(t){for(let e=0;e<t.length;e++)t[e]()}function Pr(t,e,r={}){let a=[],n=[],i=[],o=0,l=e.length>1?[]:null;return _e(()=>pn(i)),()=>{let h=t()||[],c,s;return h[Jt],ne(()=>{let m=h.length,$,u,v,w,A,g,f,y,b;if(m===0)o!==0&&(pn(i),i=[],a=[],n=[],o=0,l&&(l=[])),r.fallback&&(a=[Dr],n[0]=He(k=>(i[0]=k,r.fallback())),o=1);else if(o===0){for(n=new Array(m),s=0;s<m;s++)a[s]=h[s],n[s]=He(d);o=m}else{for(v=new Array(m),w=new Array(m),l&&(A=new Array(m)),g=0,f=Math.min(o,m);g<f&&a[g]===h[g];g++);for(f=o-1,y=m-1;f>=g&&y>=g&&a[f]===h[y];f--,y--)v[y]=n[f],w[y]=i[f],l&&(A[y]=l[f]);for($=new Map,u=new Array(y+1),s=y;s>=g;s--)b=h[s],c=$.get(b),u[s]=c===void 0?-1:c,$.set(b,s);for(c=g;c<=f;c++)b=a[c],s=$.get(b),s!==void 0&&s!==-1?(v[s]=n[c],w[s]=i[c],l&&(A[s]=l[c]),s=u[s],$.set(b,s)):i[c]();for(s=g;s<m;s++)s in v?(n[s]=v[s],i[s]=w[s],l&&(l[s]=A[s],l[s](s))):n[s]=He(d);n=n.slice(0,o=m),a=h.slice(0)}return n});function d(m){if(i[s]=m,l){const[$,u]=H(s);return l[s]=u,e(h[s],$)}return e(h[s])}}}function ae(t,e){return ne(()=>t(e||{}))}function xr(t){const e="fallback"in t&&{fallback:()=>t.fallback};return Q(Pr(()=>t.each,t.children,e||void 0))}function jr(t,e,r){let a=r.length,n=e.length,i=a,o=0,l=0,h=e[n-1].nextSibling,c=null;for(;o<n||l<i;){if(e[o]===r[l]){o++,l++;continue}for(;e[n-1]===r[i-1];)n--,i--;if(n===o){const s=i<a?l?r[l-1].nextSibling:r[i-l]:h;for(;l<i;)t.insertBefore(r[l++],s)}else if(i===l)for(;o<n;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===r[i-1]&&r[l]===e[n-1]){const s=e[--n].nextSibling;t.insertBefore(r[l++],e[o++].nextSibling),t.insertBefore(r[--i],s),e[n]=r[i]}else{if(!c){c=new Map;let d=l;for(;d<i;)c.set(r[d],d++)}const s=c.get(e[o]);if(s!=null)if(l<s&&s<i){let d=o,m=1,$;for(;++d<n&&d<i&&!(($=c.get(e[d]))==null||$!==s+m);)m++;if(m>s-l){const u=e[o];for(;l<s;)t.insertBefore(r[l++],u)}else t.replaceChild(r[l++],e[o++])}else o++;else e[o++].remove()}}}const gn="_$DX_DELEGATE";function Tr(t,e,r,a={}){let n;return He(i=>{n=i,e===document?t():Pe(e,t(),e.firstChild?null:void 0,r)},a.owner),()=>{n(),e.textContent=""}}function $e(t,e,r){let a;const n=()=>{const o=document.createElement("template");return o.innerHTML=t,r?o.content.firstChild.firstChild:o.content.firstChild},i=e?()=>(a||(a=n())).cloneNode(!0):()=>ne(()=>document.importNode(a||(a=n()),!0));return i.cloneNode=i,i}function ot(t,e=window.document){const r=e[gn]||(e[gn]=new Set);for(let a=0,n=t.length;a<n;a++){const i=t[a];r.has(i)||(r.add(i),e.addEventListener(i,Er))}}function er(t,e,r){r==null?t.removeAttribute(e):t.setAttribute(e,r)}function tr(t,e){e==null?t.removeAttribute("class"):t.className=e}function Vt(t,e,r){if(!e)return r?er(t,"style"):e;const a=t.style;if(typeof e=="string")return a.cssText=e;typeof r=="string"&&(a.cssText=r=void 0),r||(r={}),e||(e={});let n,i;for(i in r)e[i]==null&&a.removeProperty(i),delete r[i];for(i in e)n=e[i],n!==r[i]&&(a.setProperty(i,n),r[i]=n);return r}function Mr(t,e,r){return ne(()=>t(e,r))}function Pe(t,e,r,a){if(r!==void 0&&!a&&(a=[]),typeof e!="function")return Qe(t,e,a,r);te(n=>Qe(t,e(),n,r),a)}function Er(t){const e=`$$${t.type}`;let r=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==r&&Object.defineProperty(t,"target",{configurable:!0,value:r}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return r||document}});r;){const a=r[e];if(a&&!r.disabled){const n=r[`${e}Data`];if(n!==void 0?a.call(r,n,t):a.call(r,t),t.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function Qe(t,e,r,a,n){for(;typeof r=="function";)r=r();if(e===r)return r;const i=typeof e,o=a!==void 0;if(t=o&&r[0]&&r[0].parentNode||t,i==="string"||i==="number")if(i==="number"&&(e=e.toString()),o){let l=r[0];l&&l.nodeType===3?l.data=e:l=document.createTextNode(e),r=me(t,r,a,l)}else r!==""&&typeof r=="string"?r=t.firstChild.data=e:r=t.textContent=e;else if(e==null||i==="boolean")r=me(t,r,a);else{if(i==="function")return te(()=>{let l=e();for(;typeof l=="function";)l=l();r=Qe(t,l,r,a)}),()=>r;if(Array.isArray(e)){const l=[],h=r&&Array.isArray(r);if(Xt(l,e,r,n))return te(()=>r=Qe(t,l,r,a,!0)),()=>r;if(l.length===0){if(r=me(t,r,a),o)return r}else h?r.length===0?vn(t,l,a):jr(t,r,l):(r&&me(t),vn(t,l));r=l}else if(e instanceof Node){if(Array.isArray(r)){if(o)return r=me(t,r,a,e);me(t,r,null,e)}else r==null||r===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);r=e}else console.warn("Unrecognized value. Skipped inserting",e)}return r}function Xt(t,e,r,a){let n=!1;for(let i=0,o=e.length;i<o;i++){let l=e[i],h=r&&r[i];if(l instanceof Node)t.push(l);else if(!(l==null||l===!0||l===!1))if(Array.isArray(l))n=Xt(t,l,h)||n;else if(typeof l=="function")if(a){for(;typeof l=="function";)l=l();n=Xt(t,Array.isArray(l)?l:[l],Array.isArray(h)?h:[h])||n}else t.push(l),n=!0;else{const c=String(l);h&&h.nodeType===3?(h.data=c,t.push(h)):t.push(document.createTextNode(c))}}return n}function vn(t,e,r=null){for(let a=0,n=e.length;a<n;a++)t.insertBefore(e[a],r)}function me(t,e,r,a){if(r===void 0)return t.textContent="";const n=a||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(n!==l){const h=l.parentNode===t;!i&&!o?h?t.replaceChild(n,l):t.insertBefore(n,r):h&&l.remove()}else i=!0}}else t.insertBefore(n,r);return[n]}const Cr=!1;function Lr(t,e,r){return t.addEventListener(e,r),()=>t.removeEventListener(e,r)}function Nr([t,e],r,a){return[r?()=>r(t()):t,a?n=>e(a(n)):e]}function Rr(t){try{return document.querySelector(t)}catch{return null}}function Br(t,e){const r=Rr(`#${t}`);r?r.scrollIntoView():e&&window.scrollTo(0,0)}function Ir(t,e,r,a){let n=!1;const i=l=>typeof l=="string"?{value:l}:l,o=Nr(H(i(t()),{equals:(l,h)=>l.value===h.value}),void 0,l=>(!n&&e(l),l));return r&&_e(r((l=t())=>{n=!0,o[1](i(l)),n=!1})),{signal:o,utils:a}}function Gr(t){if(t){if(Array.isArray(t))return{signal:t}}else return{signal:H({value:""})};return t}function Ur(){return Ir(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:t,replace:e,scroll:r,state:a})=>{e?window.history.replaceState(a,"",t):window.history.pushState(a,"",t),Br(window.location.hash.slice(1),r)},t=>Lr(window,"popstate",()=>t()),{go:t=>window.history.go(t)})}function Kr(){let t=new Set;function e(n){return t.add(n),()=>t.delete(n)}let r=!1;function a(n,i){if(r)return!(r=!1);const o={to:n,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const l of t)l.listener({...o,from:l.location,retry:h=>{h&&(r=!0),l.navigate(n,i)}});return!o.defaultPrevented}return{subscribe:e,confirm:a}}const Wr=/^(?:[a-z0-9]+:)?\/\//i,qr=/^\/+|(\/)\/+$/g;function Ct(t,e=!1){const r=t.replace(qr,"$1");return r?e||/^[?#]/.test(r)?r:"/"+r:""}function Lt(t,e,r){if(Wr.test(e))return;const a=Ct(t),n=r&&Ct(r);let i="";return!n||e.startsWith("/")?i=a:n.toLowerCase().indexOf(a.toLowerCase())!==0?i=a+n:i=n,(i||"/")+Ct(e,!i)}function Fr(t){const e={};return t.searchParams.forEach((r,a)=>{e[a]=r}),e}function Jr(t){const e=new Map,r=mr();return new Proxy({},{get(a,n){return e.has(n)||br(r,()=>e.set(n,Q(()=>t()[n]))),e.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}const Hr=100,Vr=Vn(),Xr=Vn();let yn;function zr(t,e){const r=new URL("http://sar"),a=Q(h=>{const c=t();try{return new URL(c,r)}catch{return console.error(`Invalid path ${c}`),h}},r,{equals:(h,c)=>h.href===c.href}),n=Q(()=>a().pathname),i=Q(()=>a().search,!0),o=Q(()=>a().hash),l=Q(()=>"");return{get pathname(){return n()},get search(){return i()},get hash(){return o()},get state(){return e()},get key(){return l()},query:Jr(yr(i,()=>Fr(a())))}}function Yr(t,e="",r,a){const{signal:[n,i],utils:o={}}=Gr(t),l=o.parsePath||(E=>E),h=o.renderPath||(E=>E),c=o.beforeLeave||Kr(),s=Lt("",e),d=void 0;if(s===void 0)throw new Error(`${s} is not a valid base path`);s&&!n().value&&i({value:s,replace:!0,scroll:!1});const[m,$]=H(!1),u=async E=>{$(!0);try{await wr(E)}finally{$(!1)}},[v,w]=H(n().value),[A,g]=H(n().state),f=zr(v,A),y=[],b={pattern:s,params:{},path:()=>s,outlet:()=>null,resolvePath(E){return Lt(s,E)}};if(r)try{yn=b,b.data=r({data:void 0,params:{},location:f,navigate:S(b)})}finally{yn=void 0}function k(E,T,_){ne(()=>{if(typeof T=="number"){T&&(o.go?c.confirm(T,_)&&o.go(T):console.warn("Router integration does not support relative routing"));return}const{replace:p,resolve:O,scroll:D,state:C}={replace:!1,resolve:!0,scroll:!0,..._},M=O?E.resolvePath(T):Lt("",T);if(M===void 0)throw new Error(`Path '${T}' is not a routable path`);if(y.length>=Hr)throw new Error("Too many redirects");const x=v();if((M!==x||C!==A())&&!Cr){if(c.confirm(M,_)){const L=y.push({value:x,replace:p,scroll:D,state:A()});u(()=>{w(M),g(C)}).then(()=>{y.length===L&&P({value:M,state:C})})}}})}function S(E){return E=E||_r(Xr)||b,(T,_)=>k(E,T,_)}function P(E){const T=y[0];T&&((E.value!==T.value||E.state!==T.state)&&i({...E,replace:T.replace,scroll:T.scroll}),y.length=0)}te(()=>{const{value:E,state:T}=n();ne(()=>{E!==v()&&u(()=>{w(E),g(T)})})});{let E=function(T){if(T.defaultPrevented||T.button!==0||T.metaKey||T.altKey||T.ctrlKey||T.shiftKey)return;const _=T.composedPath().find(x=>x instanceof Node&&x.nodeName.toUpperCase()==="A");if(!_||!_.hasAttribute("link"))return;const p=_.href;if(_.target||!p&&!_.hasAttribute("state"))return;const O=(_.getAttribute("rel")||"").split(/\s+/);if(_.hasAttribute("download")||O&&O.includes("external"))return;const D=new URL(p);if(D.origin!==window.location.origin||s&&D.pathname&&!D.pathname.toLowerCase().startsWith(s.toLowerCase()))return;const C=l(D.pathname+D.search+D.hash),M=_.getAttribute("state");T.preventDefault(),k(b,C,{resolve:!1,replace:_.hasAttribute("replace"),scroll:!_.hasAttribute("noscroll"),state:M&&JSON.parse(M)})};var j=E;ot(["click"]),document.addEventListener("click",E),_e(()=>document.removeEventListener("click",E))}return{base:b,out:d,location:f,isRouting:m,renderPath:h,parsePath:l,navigatorFactory:S,beforeLeave:c}}const Zr=t=>{const{source:e,url:r,base:a,data:n,out:i}=t,o=e||Ur(),l=Yr(o,a,n);return ae(Vr.Provider,{value:l,get children(){return t.children}})};const zt=Symbol("store-raw"),xe=Symbol("store-node");function nr(t){let e=t[he];if(!e&&(Object.defineProperty(t,he,{value:e=new Proxy(t,ti)}),!Array.isArray(t))){const r=Object.keys(t),a=Object.getOwnPropertyDescriptors(t);for(let n=0,i=r.length;n<i;n++){const o=r[n];a[o].get&&Object.defineProperty(t,o,{enumerable:a[o].enumerable,get:a[o].get.bind(e)})}}return e}function et(t){let e;return t!=null&&typeof t=="object"&&(t[he]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function je(t,e=new Set){let r,a,n,i;if(r=t!=null&&t[zt])return r;if(!et(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,l=t.length;o<l;o++)n=t[o],(a=je(n,e))!==n&&(t[o]=a)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),l=Object.getOwnPropertyDescriptors(t);for(let h=0,c=o.length;h<c;h++)i=o[h],!l[i].get&&(n=t[i],(a=je(n,e))!==n&&(t[i]=a))}return t}function tn(t){let e=t[xe];return e||Object.defineProperty(t,xe,{value:e=Object.create(null)}),e}function Yt(t,e,r){return t[e]||(t[e]=ir(r))}function Qr(t,e){const r=Reflect.getOwnPropertyDescriptor(t,e);return!r||r.get||!r.configurable||e===he||e===xe||(delete r.value,delete r.writable,r.get=()=>t[he][e]),r}function rr(t){if(Hn()){const e=tn(t);(e._||(e._=ir()))()}}function ei(t){return rr(t),Reflect.ownKeys(t)}function ir(t){const[e,r]=H(t,{equals:!1,internal:!0});return e.$=r,e}const ti={get(t,e,r){if(e===zt)return t;if(e===he)return r;if(e===Jt)return rr(t),r;const a=tn(t),n=a[e];let i=n?n():t[e];if(e===xe||e==="__proto__")return i;if(!n){const o=Object.getOwnPropertyDescriptor(t,e);Hn()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(o&&o.get)&&(i=Yt(a,e,i)())}return et(i)?nr(i):i},has(t,e){return e===zt||e===he||e===Jt||e===xe||e==="__proto__"?!0:(this.get(t,e,t),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:ei,getOwnPropertyDescriptor:Qr};function tt(t,e,r,a=!1){if(!a&&t[e]===r)return;const n=t[e],i=t.length;r===void 0?delete t[e]:t[e]=r;let o=tn(t),l;(l=Yt(o,e,n))&&l.$(()=>r),Array.isArray(t)&&t.length!==i&&(l=Yt(o,"length",i))&&l.$(t.length),(l=o._)&&l.$()}function or(t,e){const r=Object.keys(e);for(let a=0;a<r.length;a+=1){const n=r[a];tt(t,n,e[n])}}function ni(t,e){if(typeof e=="function"&&(e=e(t)),e=je(e),Array.isArray(e)){if(t===e)return;let r=0,a=e.length;for(;r<a;r++){const n=e[r];t[r]!==n&&tt(t,r,n)}tt(t,"length",a)}else or(t,e)}function ke(t,e,r=[]){let a,n=t;if(e.length>1){a=e.shift();const o=typeof a,l=Array.isArray(t);if(Array.isArray(a)){for(let h=0;h<a.length;h++)ke(t,[a[h]].concat(e),r);return}else if(l&&o==="function"){for(let h=0;h<t.length;h++)a(t[h],h)&&ke(t,[h].concat(e),r);return}else if(l&&o==="object"){const{from:h=0,to:c=t.length-1,by:s=1}=a;for(let d=h;d<=c;d+=s)ke(t,[d].concat(e),r);return}else if(e.length>1){ke(t[a],e,[a].concat(r));return}n=t[a],r=[a].concat(r)}let i=e[0];typeof i=="function"&&(i=i(n,r),i===n)||a===void 0&&i==null||(i=je(i),a===void 0||et(n)&&et(i)&&!Array.isArray(i)?or(n,i):tt(t,a,i))}function ri(...[t,e]){const r=je(t||{}),a=Array.isArray(r),n=nr(r);function i(...o){vr(()=>{a&&o.length===1?ni(r,o[0]):ke(r,o)})}return[n,i]}var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ii(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ar(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nn={exports:{}};nn.exports;(function(t){(function(){function e(a,n){return n?ar(a):a.slice?e[i(a)]:function(o,l){a(o={exports:{}}),e[i(l)]=o.exports};function i(o){return o.split("/").slice(-1).toString().replace(".js","")}}var r=t;e(function(a){String.random=function(i,o){var l="";for(i=i||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";i-- >0;)l+=o.charAt(Math.floor(Math.random()*o.length));return l},String.match=function(i,o){var l,h;return typeof i!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},l=o["="]||o["*"]||o[">"]||o["<"],i===l?!0:h!==o["="]?!1:(l=o["*"]||o[">"],i.slice(0,(l||"").length)===l?!0:h!==o["*"]?!1:h!==o[">"]&&h!==o["<"]?i>=o[">"]&&i<=o["<"]:h!==o[">"]&&i>=o[">"]||h!==o["<"]&&i<=o["<"]))},String.hash=function(i,o){if(typeof i=="string"){if(o=o||0,!i.length)return o;for(var l=0,h=i.length,c;l<h;++l)c=i.charCodeAt(l),o=(o<<5)-o+c,o|=0;return o}};var n=Object.prototype.hasOwnProperty;Object.plain=function(i){return i?i instanceof Object&&i.constructor===Object||Object.prototype.toString.call(i).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(i,o){for(var l in i)if(n.call(i,l)&&(!o||o.indexOf(l)==-1))return!1;return!0},Object.keys=Object.keys||function(i){var o=[];for(var l in i)n.call(i,l)&&o.push(l);return o},function(){var i,o=setTimeout,l=0,h=0,c=typeof setImmediate!=""+i&&setImmediate||function(d,m){return typeof MessageChannel==""+i?o:((d=new MessageChannel).port1.onmessage=function($){$.data==""&&m()},function($){m=$,d.port2.postMessage("")})}(),s=o.check=o.check||typeof performance!=""+i&&performance||{now:function(){return+new Date}};o.hold=o.hold||9,o.poll=o.poll||function(d){if(o.hold>=s.now()-l&&h++<3333){d();return}c(function(){l=s.now(),d()},h=0)}}(),function(){var i=setTimeout,o=i.turn=i.turn||function(m){l.push(m)==1&&h(d)},l=o.s=[],h=i.poll,c=0,s,d=function(){(s=l[c++])&&s(),(c==l.length||c==99)&&(l=o.s=l.slice(c),c=0),l.length&&h(d)}}(),function(){var i,o=setTimeout,l=o.turn;(o.each=o.each||function(h,c,s,d){d=d||9,function m($,u,v){if(u=($=(h||[]).splice(0,d)).length){for(var w=0;w<u&&i===(v=c($[w]));w++);if(i===v){l(m);return}}s&&s(v)}()})()}()})(e,"./shim"),e(function(a){a.exports=function n(s,o,l){if(!s)return{to:n};var h,c=typeof o=="function",s=(this.tag||(this.tag={}))[s]||c&&(this.tag[s]={tag:s,to:n._={next:function(m){var $;($=this.to)&&$.next(m)}}});if(c){var d={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:o,the:s,on:this,as:l};return(d.back=s.last||s).to=d,s.last=d}return(s=s.to)&&h!==o&&s.next(o),s}})(e,"./onto"),e(function(a){a.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(e,"./valid"),e(function(a){e("./shim");function n(){var s=+new Date;return h<s?(o=0,h=s+n.drift):h=s+(o+=1)/l+n.drift}n.drift=0;var i=-1/0,o=0,l=999,h=i,c;n.is=function(s,d,m){var $=d&&s&&s._&&s._[">"]||m;if($)return typeof($=$[d])=="number"?$:i},n.ify=function(s,d,m,$,u){(s=s||{})._=s._||{},u&&(s._["#"]=u);var v=s._[">"]||(s._[">"]={});return c!==d&&d!=="_"&&(typeof m=="number"&&(v[d]=m),c!==$&&(s[d]=$)),s},a.exports=n})(e,"./state"),e(function(a){e("./shim");function n(i){var o={s:{}},l=o.s;i=i||{max:999,age:1e3*9},o.check=function(c){return l[c]?h(c):!1};var h=o.track=function(c){var s=l[c]||(l[c]={});return s.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,i.age+9)),h.ed&&h.ed(c),s};return o.drop=function(c){o.to=null,o.now=+new Date;var s=Object.keys(l);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(s,function(d){var m=l[d];m&&(c||i.age)>o.now-m.was||delete l[d]},0,99)},o}a.exports=n})(e,"./dup"),e(function(a){e("./onto"),a.exports=function(o,l){if(this.on){var h=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var s=o["#"]||o,c=(this.tag||"")[s];return c?(l&&(c=this.on(s,l),clearTimeout(c.err),c.err=setTimeout(function(){c.off()},h)),!0):void 0}var s=l&&l["#"]||n(9);if(!o)return s;var d=this.on(s,o,l);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},h),s}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(a){function n(u){return u instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:u}):new n(u)}n.is=function(u){return u instanceof n||u&&u._&&u===u._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},e("./shim"),n.valid=e("./valid"),n.state=e("./state"),n.on=e("./onto"),n.dup=e("./dup"),n.ask=e("./ask"),function(){n.create=function(p){p.root=p.root||p,p.graph=p.graph||{},p.on=p.on||n.on,p.ask=p.ask||n.ask,p.dup=p.dup||n.dup();var O=p.$.opt(p.opt);return p.once||(p.on("in",u,p),p.on("out",u,p),p.on("put",A,p),n.on("create",p),p.on("create",p)),p.once=1,O};function u(p){if(p){if(p.out===u){this.to.next(p);return}var O=this,D=O.as,C=D.at||D,M=C.$,x=C.dup,L,N=p.DBG;if((L=p["#"])||(L=p["#"]=o(9)),!x.check(L)){if(x.track(L),L=p._,p._=typeof L=="function"?L:function(){},p.$&&p.$===(p.$._||"").$||(p.$=M),p["@"]&&!p.put&&f(p),!C.ask(p["@"],p))if(N&&(N.u=+new Date),p.put){v(p);return}else p.get&&n.on.get(p,M);N&&(N.uc=+new Date),O.to.next(p),N&&(N.ua=+new Date),!(p.nts||p.NTS)&&(p.out=u,C.on("out",p),N&&(N.ue=+new Date))}}}function v(p){if(p){var O=p._||"",D=O.root=((O.$=p.$||"")._||"").root;if(p["@"]&&O.faith&&!O.miss){p.out=u,D.on("out",p);return}O.latch=D.hatch,O.match=D.hatch=[];var C=p.put,M=O.DBG=p.DBG,x=+new Date;if(T=T||x,!(C["#"]&&C["."])){M&&(M.p=x),O["#"]=p["#"],O.msg=p,O.all=0,O.stun=1;var L=Object.keys(C);console.STAT&&console.STAT(x,((M||O).pk=+new Date)-x,"put sort");var N=0,I,G,K,W,J,B,R;(function fe(Ue){if(I!=N){if(I=N,!(K=L[N])){console.STAT&&console.STAT(x,((M||O).pd=+new Date)-x,"put"),g(O);return}(W=C[K])?(R=W._)?K!==R["#"]?B=b+k(K)+"soul not same.":(J=R[">"])||(B=b+k(K)+"no state."):B=b+k(K)+"no meta.":B=b+k(K)+"no node.",G=Object.keys(W||{})}if(B){p.err=O.err=B,g(O);return}var dn=0,de;for(Ue=Ue||0;Ue++<9&&(de=G[dn++]);)if(de!=="_"){var Ke=W[de],hn=J[de];if(d===hn){B=b+k(de)+"on"+k(K)+"no state.";break}if(!h(Ke)){B=b+k(de)+"on"+k(K)+"bad "+typeof Ke+k(Ke);break}w(Ke,de,K,hn,p),++E}if((G=G.slice(dn)).length){l(fe);return}++N,G=null,fe(Ue)})()}}}n.on.put=v;function w(p,O,D,C,M){var x=M._||"",L=x.root,N=L.graph,I,G=N[D]||m,K=c(G,O,1),W=G[O],J=x.DBG;(I=console.STAT)&&(!N[D]||!W)&&(I.has=(I.has||0)+1);var B=j();if(C>B){setTimeout(function(){w(p,O,D,C,M)},(I=C-B)>P?P:I),console.STAT&&console.STAT((J||x).Hf=+new Date,I,"future");return}if(!(C<K)&&!(!x.faith&&C===K&&(p===W||S(p)<=S(W))&&!x.miss)){x.stun++;var R=M["#"]+x.all++,fe={toString:function(){return R},_:x};fe.toJSON=fe.toString,L.dup.track(fe)["#"]=M["#"],J&&(J.ph=J.ph||+new Date),L.on("put",{"#":fe,"@":M["@"],put:{"#":D,".":O,":":p,">":C},ok:M.ok,_:x})}}function A(p){var O;(O=(p._||"").DBG)&&(O.pa=+new Date,O.pm=O.pm||+new Date);var D=this,C=D.as,M=C.graph,x=p._,L=p.put,N=L["#"],I=L["."],G=L[":"],K=L[">"];p["#"];var W;(W=x.msg)&&(W=W.put)&&(W=W[N])&&s(W,I,K,G,N),M[N]=s(M[N],I,K,G,N),(W=(C.next||"")[N])&&W.on("in",p),g(x),D.to.next(p)}function g(p,O){var D;if(!p.stop&&!(!p.err&&0<--p.stun)&&(p.stop=1,!!(D=p.root))){var C=p.match;C.end=1,C===D.hatch&&(!(C=p.latch)||C.end?delete D.hatch:D.hatch=C),p.hatch&&p.hatch(),setTimeout.each(p.match,function(M){M&&M()}),!(!(O=p.msg)||p.err||O.err)&&(O.out=u,p.root.on("out",O),_())}}function f(p){var O=p["@"]||"",D;if(!(D=O._)){var C=(C=p.$)&&(C=C._)&&(C=C.root)&&(C=C.dup);if(!(C=C.check(O)))return;p["@"]=C["#"]||p["@"];return}D.acks=(D.acks||0)+1,(D.err=p.err)&&(p["@"]=D["#"],g(D)),D.ok=p.ok||D.ok,!D.stop&&!D.crack&&(D.crack=D.match&&D.match.push(function(){y(D)})),y(D)}function y(p){!p||!p.root||p.stun||p.acks!==p.all||p.root.on("in",{"@":p["#"],err:p.err,ok:p.err?d:p.ok||{"":1}})}var b="Error: Invalid graph!",k=function(p){return" '"+(""+p).slice(0,9)+"...' "},S=JSON.stringify,P=2147483647,j=n.state,E=0,T,_=function(){E>999&&E/-(T-(T=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),_=function(){E=0})}}(),function(){n.on.get=function(v,w){var A=w._,g=v.get,f=g["#"],y=A.graph[f],b=g["."],k=A.next||(A.next={}),S=k[f],P=v._||{},j=P.DBG=v.DBG;if(j&&(j.g=+new Date),!y)return A.on("get",v);if(b){if((typeof b!="string"||d===y[b])&&!((S||"").next||"")[b]){A.on("get",v);return}y=s({},b,c(y,b),y[b],f)}y&&u(v,y),A.on("get",v)};function u(v,w){var A=+new Date,g=v._||{},f=g.DBG=v.DBG,y=v["#"],b=o(9),k=Object.keys(w||"").sort(),S=((w||"")._||"")["#"];k.length;var P=v.$._.root,j=w===P.graph[S];console.STAT&&console.STAT(A,((f||g).gk=+new Date)-A,"got keys"),w&&function E(){A=+new Date;for(var T=0,_,p={},O;T<9&&(_=k[T++]);)s(p,_,c(w,_),w[_],S);k=k.slice(T),(O={})[S]=p,p=O;var D;j&&(D=function(){},D.ram=D.faith=!0),O=k.length,console.STAT&&console.STAT(A,-(A-(A=+new Date)),"got copied some"),f&&(f.ga=+new Date),P.on("in",{"@":y,"#":b,put:p,"%":O?b=o(9):d,$:P.$,_:D,DBG:f,FOO:1}),console.STAT&&console.STAT(A,+new Date-A,"got in"),O&&setTimeout.turn(E)}(),w||P.on("in",{"@":v["#"]})}n.on.get.ack=u}(),function(){n.chain.opt=function(u){u=u||{};var v=this,w=v._,A=u.peers||u;return Object.plain(u)||(u={}),Object.plain(w.opt)||(w.opt=u),typeof A=="string"&&(A=[A]),Object.plain(w.opt.peers)||(w.opt.peers={}),A instanceof Array&&(u.peers={},A.forEach(function(g){var f={};f.id=f.url=g,u.peers[g]=w.opt.peers[g]=w.opt.peers[g]||f})),i(u,function g(f){var y=this[f];if(this&&this.hasOwnProperty(f)||typeof y=="string"||Object.empty(y)){this[f]=y;return}y&&y.constructor!==Object&&!(y instanceof Array)||i(y,g)}),w.opt.from=u,n.on("opt",w),w.opt.uuid=w.opt.uuid||function(f){return n.state().toString(36).replace(".","")+String.random(f||12)},v}}();var i=function(u,v){Object.keys(u).forEach(v,u)},o=String.random,l=setTimeout.turn,h=n.valid,c=n.state.is,s=n.state.ify,d,m={},$;n.log=function(){return!n.log.off&&$.log.apply($,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(u,v,w){return(w=n.log.once)[u]=w[u]||0,w[u]++||n.log(v)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof r<"u"&&(r.exports=n)}catch{}a.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},($=console).only=function(u,v){return $.only.i&&u===$.only.i&&$.only.i++&&($.log.apply($,arguments)||v)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(a){var n=e("./root");n.chain.back=function(l,h){var c;if(l=l||1,l===-1||l===1/0)return this._.root.$;if(l===1)return(this._.back||this._).$;var s=this,d=s._;if(typeof l=="string"&&(l=l.split(".")),l instanceof Array){var m=0,$=l.length,c=d;for(m;m<$;m++)c=(c||i)[l[m]];return o!==c?h?s:c:(c=d.back)?c.$.back(l,h):void 0}if(typeof l=="function"){for(var u,c={back:d};(c=c.back)&&o===(u=l(c,h)););return u}return typeof l=="number"?(d.back||d).$.back(l-1):this};var i={},o})(e,"./back"),e(function(a){var n=e("./root");n.chain.chain=function(g){var f=this,y=f._,b=new(g||f).constructor(f),k=b._,S;return k.root=S=y.root,k.id=++S.once,k.back=f._,k.on=n.on,k.on("in",n.on.in,k),k.on("out",n.on.out,k),b};function i(g){var f,y=this.as,b=y.back,k=y.root,S;if(g.$||(g.$=y.$),this.to.next(g),y.err){y.on("in",{put:y.put=d,$:y.$});return}if(f=g.get){if(k.pass&&(k.pass[y.id]=y),y.lex&&Object.keys(y.lex).forEach(function(P){S[P]=y.lex[P]},S=g.get=g.get||{}),f["#"]||y.soul){if(f["#"]=f["#"]||y.soul,g["#"]||(g["#"]=m(9)),b=k.$.get(f["#"])._,f=f["."]){if(u(b.put,f)&&(S=b.ask&&b.ask[f],(b.ask||(b.ask={}))[f]=b.$.get(f)._,b.on("in",{get:f,put:{"#":b.soul,".":f,":":b.put[f],">":w(k.graph[b.soul],f)}}),S))return}else{if(S=b.ask&&b.ask[""],(b.ask||(b.ask={}))[""]=b,d!==b.put&&(b.on("in",b),S))return;g.$=b.$}return k.ask(c,g),k.on("in",g)}if(f["."])return y.get?(g={get:{".":y.get},$:y.$},(b.ask||(b.ask={}))[y.get]=g.$._,b.on("out",g)):(g={get:y.lex?g.get:{},$:y.$},b.on("out",g));if((y.ask||(y.ask={}))[""]=y,y.get)return f["."]=y.get,(b.ask||(b.ask={}))[y.get]=g.$._,b.on("out",g)}return b.on("out",g)}n.on.out=i;function o(g,f){f=f||this.as;var y=f.root,b=g.$||(g.$=f.$),k=(b||"")._||s,S=g.put||"",P=S["#"],j=S["."],E=d!==S["="]?S["="]:S[":"],T=S[">"]||-1/0,_;if(d!==g.put&&(d===S["#"]||d===S["."]||d===S[":"]&&d===S["="]||d===S[">"])){if(!$(S)){if(!(P=((S||"")._||"")["#"])){console.log("chain not yet supported for",S,"...",g,f);return}return b=f.root.$.get(P),setTimeout.each(Object.keys(S).sort(),function(p){p=="_"||d===(T=w(S,p))||f.on("in",{$:b,put:{"#":P,".":p,"=":S[p],">":T},VIA:g})})}f.on("in",{$:k.back.$,put:{"#":P=k.back.soul,".":j=k.has||k.get,"=":S,">":w(k.back.put,j)},via:g});return}(g.seen||"")[f.id]||((g.seen||(g.seen=function(){}))[f.id]=f,f!==k&&(Object.keys(g).forEach(function(p){S[p]=g[p]},S={}),S.get=f.get||S.get,!f.soul&&!f.has?S.$$$=S.$$$||f.$:k.soul&&(S.$=f.$,S.$$=S.$$||k.$),g=S),h(g,f),(f.soul||g.$$)&&T>=w(y.graph[P],j)&&((S=y.$.get(P)._).put=A(S.put,j,T,E,P)),!k.soul&&T>=w(y.graph[P],j)&&(_=(y.$.get(P)._.next||"")[j])&&(_.put=E,typeof(S=$(E))=="string"&&(_.put=y.$.get(S)._.put||E)),this.to&&this.to.next(g),f.any&&setTimeout.each(Object.keys(f.any),function(p){(p=f.any[p])&&p(g)},0,99),f.echo&&setTimeout.each(Object.keys(f.echo),function(p){(p=f.echo[p])&&p.on("in",g)},0,99),((g.$$||"")._||k).soul&&(_=f.next)&&(_=_[j])&&(S={},Object.keys(g).forEach(function(p){S[p]=g[p]}),S.$=(g.$$||g.$).get(S.get=j),delete S.$$,delete S.$$$,_.on("in",S)),l(g,f))}n.on.in=o;function l(g,f){if(f=f||this.as||g.$._,!(g.$$&&this!==n.on)&&!(!g.put||f.soul)){var y=g.put||"",b=y["="]||y[":"],j,k=f.root,S=k.$.get(y["#"]).get(y["."])._;if(typeof(b=$(b))!="string"){this===n.on&&((S.echo||(S.echo={}))[f.id]=f);return}if(!((S.echo||(S.echo={}))[f.id]&&!(k.pass||"")[f.id])){if(j=k.pass){if(j[b+f.id])return;j[b+f.id]=1}(S.echo||(S.echo={}))[f.id]=f,f.has&&(f.link=b);var P=k.$.get(S.link=b)._;(P.echo||(P.echo={}))[S.id]=S;var j=f.ask||"";(j[""]||f.lex)&&P.on("out",{get:{"#":b}}),setTimeout.each(Object.keys(j),function(E,T){!E||!(T=j[E])||T.on("out",{get:{"#":b,".":E}})},0,99)}}}n.on.link=l;function h(g,f){var y=g.put||"",b=d!==y["="]?y["="]:y[":"],k=f.root,S,P;if(d===b){if(f.soul&&d!==f.put||(P=(g.$$||g.$||"")._||"",g["@"]&&(d!==P.put||d!==f.put)))return;(S=f.link||g.linked)&&delete(k.$.get(S)._.echo||"")[f.id],f.has&&(f.link=null),f.put=d,setTimeout.each(Object.keys(f.next||""),function(j,E){(E=f.next[j])&&(S&&delete(k.$.get(S).get(j)._.echo||"")[E.id],E.on("in",{get:j,put:d,$:E.$}))},0,99);return}f.soul||g.$$||(S=$(b),P=g.$._||"",!((S===P.link||f.has&&!P.link)&&!((k.pass||"")[f.id]&&typeof S!="string"))&&(delete(P.echo||"")[f.id],h({get:f.get,put:d,$:g.$,linked:g.linked=g.linked||P.link},f)))}n.on.unlink=h;function c(g,f){var y=this.as,b=y.$._;b.root;var k=y.get||"",S=(g.put||"")[k["#"]]||"";if(!g.put||typeof k["."]=="string"&&d===S[k["."]]){if(d!==b.put||!b.soul&&!b.has)return;b.ack=(b.ack||0)+1,b.on("in",{get:b.get,put:b.put=d,$:b.$,"@":g["@"]});return}(g._||{}).miss=1,n.on.put(g)}var s={},d,m=String.random,$=n.valid,u=function(g,f){return g&&Object.prototype.hasOwnProperty.call(g,f)},v=n.state,w=v.is,A=v.ify})(e,"./chain"),e(function(a){var n=e("./root");n.chain.get=function(d,m,$){var u,v;if(typeof d=="string"){if(d.length==0)return(u=this.chain())._.err={err:n.log("0 length key!",d)},m&&m.call(u,u._.err),u;var w=this,A=w._,g=A.next||h;(u=g[d])||(u=d&&i(d,w)),u=u&&u.$}else if(typeof d=="function"){let j=function(E,T,_){if(!j.stun&&!((x=y.pass)&&!x[b])){var p=E.$._,O=(E.$$||"")._,D=(O||p).put,C=!p.has&&!p.soul,M={},x;if((C||s===D)&&(D=s===((x=E.put)||"")["="]?s===(x||"")[":"]?x:x[":"]:x["="]),typeof(x=n.valid(D))=="string"&&(D=s===(x=y.$.get(x)._.put)?f.not?s:D:x),!(f.not&&s===D)){if(s===f.stun){if((x=y.stun)&&x.on&&(A.$.back(function(L){if(x.on(""+L.id,M={}),(M.run||0)<j.id)return M}),!M.run&&x.on(""+p.id,M={}),!M.run&&O&&x.on(""+O.id,M={}),j.id>M.run&&((!M.stun||M.stun.end)&&(M.stun=x.on("stun"),M.stun=M.stun&&M.stun.last),M.stun&&!M.stun.end))){(M.stun.add||(M.stun.add={}))[b]=function(){j(E,T,1)};return}if(s===D&&(_=0),(x=y.hatch)&&!x.end&&s===f.hatch&&!_){if(k[p.$._.id])return;k[p.$._.id]=1,x.push(function(){j(E,T,1)});return}k={}}if(y.pass){if(y.pass[b+p.id])return;y.pass[b+p.id]=1}if(f.on){f.ok.call(p.$,D,p.get,E,T||j);return}if(f.v2020){f.ok(E,T||j);return}Object.keys(E).forEach(function(L){x[L]=E[L]},x={}),E=x,E.put=D,f.ok.call(f.as,E,T||j)}}};var S=j;if(m===!0)return o(this,d,m,$),this;u=this;var A=u._,f=m||{},y=A.root,b;f.at=A,f.ok=d;var k={};return j.at=A,(A.any||(A.any={}))[b=String.random(7)]=j,j.off=function(){j.stun=1,A.any&&delete A.any[b]},j.rid=l,j.id=f.run||++y.once,v=y.pass,(y.pass={})[b]=1,f.out=f.out||{get:{}},A.on("out",f.out),y.pass=v,u}else{if(typeof d=="number")return this.get(""+d,m,$);if(typeof(v=c(d))=="string")return this.get(v,m,$);(v=this.get.next)&&(u=v(this,d))}return u?(m&&typeof m=="function"&&u.get(m,$),u):((u=this.chain())._.err={err:n.log("Invalid get request!",d)},m&&m.call(u,u._.err),u)};function i(d,m){var $=m._,u=$.next,v=m.chain(),w=v._;return u||(u=$.next={}),u[w.get=d]=w,m===$.root.$?w.soul=d:($.soul||$.has)&&(w.has=d),w}function o(d,m,$,u){var v=d._,w=0,A;return(A=v.soul||v.link)?m(A,u,v):v.jam?v.jam.push([m,u]):(v.jam=[[m,u]],d.get(function(f,y){if(!(s===f.put&&!v.root.opt.super&&(A=Object.keys(v.root.opt.peers).length)&&++w<=A)){y.rid(f);var b=(b=f.$)&&b._||{},k=0,S;for(A=v.jam,delete v.jam;S=A[k++];){var P=S[0];S=S[1],P&&P(b.link||b.soul||n.valid(f.put)||((f.put||{})._||{})["#"],S,f,y)}}},{out:{get:{".":!0}}}),d)}function l(d){var m=this.at||this.on;if(!d||m.soul||m.has)return this.off();if(d=(d=(d=d.$||d)._||d).id){m.map;var $;if(($=this.seen||(this.seen={}))[d])return!0;$[d]=!0}}var h={},c=n.valid,s})(e,"./get"),e(function(a){var n=e("./root");n.chain.put=function(u,v,w){var A=this,g=A._,f=g.root;w=w||{},w.root=g.root,w.run||(w.run=f.once),i(w,g.id),w.ack=w.ack||v,w.via=w.via||A,w.data=w.data||u,w.soul||(w.soul=g.soul||typeof v=="string"&&v);var y=w.state=w.state||n.state();return typeof u=="function"?(u(function(b){w.data=b,A.put(c,c,w)}),A):w.soul?(w.$=f.$.get(w.soul),w.todo=[{it:w.data,ref:w.$}],w.turn=w.turn||d,w.ran=w.ran||o,function b(){var k=w.todo,S=k.pop(),P=S.it;S.ref&&S.ref._.id;var j,E,T,_,p;if(i(w,S.ref),(_=S.todo)&&(E=_.pop(),P=P[E],_.length&&k.push(S)),E&&(k.path||(k.path=[])).push(E),!(j=m(P))&&!(p=n.is(P))){if(!Object.plain(P)){o.err(w,"Invalid data: "+h(P)+" at "+(w.via.back(function(x){x.get&&_.push(x.get)},_=[])||_.join("."))+"."+(k.path||[]).join("."));return}for(var O=w.seen||(w.seen=[]),D=O.length;D--;)if(P===(_=O[D]).it){j=P=_.link;break}}if(E&&j)S.node=$(S.node,E,y,P);else{let x=function(L,N){var I=T.link["#"];N&&(N.off(),N.rid(L));var G=I||L.soul||(_=(L.$$||L.$)._||"").soul||_.link||((_=_.put||"")._||"")["#"]||_["#"]||((_=L.put||"")&&L.$$?_["#"]:(_["="]||_[":"]||"")["#"]);if(!I&&i(w,L.$),!G&&!S.link["#"]){(S.wait||(S.wait=[])).push(function(){x(L,N)});return}G||(G=[],(L.$$||L.$).back(function(K){if(_=K.soul||K.link)return G.push(_);G.push(K.get)}),G=G.reverse().join("/")),T.link["#"]=G,!p&&(((w.graph||(w.graph={}))[G]=T.node||(T.node={_:{}}))._["#"]=G),delete w.wait[C],T.wait&&setTimeout.each(T.wait,function(K){K&&K()}),w.ran(w)};var M=x;if(!w.seen){o.err(w,"Data at root of graph must be a node (an object).");return}w.seen.push(T={it:P,link:{},todo:p?[]:Object.keys(P).sort().reverse(),path:(k.path||[]).slice(),up:S}),S.node=$(S.node,E,y,T.link),!p&&T.todo.length&&k.push(T);var C=w.seen.length;(w.wait||(w.wait={}))[C]="",_=(T.ref=p?P:E?S.ref.get(E):S.ref)._,(_=P&&(P._||"")["#"]||_.soul||_.link)?x({soul:_}):T.ref.get(x,{run:w.run,v2020:1,out:{get:{".":" "}}})}if(!k.length)return w.ran(w);w.turn(b)}(),A):(l(w),A)};function i(u,v){if(v){v=(v._||"").id||v;var w=u.root.stun||(u.root.stun={on:n.on}),A={},g;u.stun||(u.stun=w.on("stun",function(){})),(g=w.on(""+v))&&g.the.last.next(A),!(A.run>=u.run)&&w.on(""+v,function(f){if(u.stun.end){this.off(),this.to.next(f);return}f.run=f.run||u.run,f.stun=f.stun||u.stun})}}function o(u){if(u.err){o.end(u.stun,u.root);return}if(!(u.todo.length||u.end||!Object.empty(u.wait))){u.end=1;var v=u.$.back(-1)._,w=v.root,A=v.ask(function(b){w.on("ack",b),b.err&&!b.lack&&n.log(b),++g>(u.acks||0)&&this.off(),u.ack&&u.ack(b,this)},u.opt),g=0,f=u.stun,y;(y=function(){f&&(o.end(f,w),setTimeout.each(Object.keys(f=f.add||""),function(b){(b=f[b])&&b()}))}).hatch=y,u.ack&&!u.ok&&(u.ok=u.acks||9),u.via._.on("out",{put:u.out=u.graph,ok:u.ok&&{"@":u.ok+1},opt:u.opt,"#":A,_:y})}}o.end=function(u,v){u.end=s,u.the.to===u&&u===u.the.last&&delete v.stun,u.off()},o.err=function(u,v){(u.ack||s).call(u,u.out={err:u.err=n.log(v)}),u.ran(u)};function l(u){var v=u.via._,w;u.via=u.via.back(function(A){if(A.soul||!A.get)return A.$;w=u.data,(u.data={})[A.get]=w}),(!u.via||!u.via._.soul)&&(u.via=v.root.$.get(((u.data||"")._||"")["#"]||v.$.back("opt.uuid")())),u.via.put(u.data,u.ack,u)}function h(u,v){return u&&(v=u.constructor)&&v.name||typeof u}var c,s=function(){},d=setTimeout.turn,m=n.valid,$=n.state.ify})(e,"./put"),e(function(a){var n=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),a.exports=n})(e,"./index"),e(function(a){var n=e("./index");n.chain.on=function(l,h,c,s){var d=this,m=d._;m.root;var $;if(typeof l=="string")return h?($=m.on(l,h,c||m,s),c&&c.$&&(c.subs||(c.subs=[])).push($),d):m.on(l);var u=h;return(u=u===!0?{change:!0}:u||{}).not=1,u.on=1,d.get(l,u),d},n.chain.once=function(l,h){if(h=h||{},!l)return i(this);var c=this,s=c._,d=s.root;s.put;var m=String.random(7),$;return c.get(function(u,v,w,A){var g=this,f=g._,y=f.one||(f.one={});if(A.stun||y[m]==="")return;if(($=n.valid(u))===!0){b();return}if(typeof $=="string")return;clearTimeout((s.one||"")[m]),clearTimeout(y[m]),y[m]=setTimeout(b,h.wait||99);function b(k){if(!f.has&&!f.soul&&(f={put:u,get:v}),o===($=f.put)&&($=((w.$$||"")._||"").put),typeof n.valid($)=="string"&&($=d.$.get($)._.put,$===o&&!k)){y[m]=setTimeout(function(){b(1)},h.wait||99);return}A.stun||y[m]!==""&&(y[m]="",(s.soul||s.has)&&A.off(),l.call(g,$,f.get),clearTimeout(y[m]))}},{on:1}),c};function i(l,h,c){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(c=l.chain())._.nix=l.once(function(s,d){c._.on("in",this._)}),c._.lex=l._.lex,c}n.chain.off=function(){var l=this,h=l._,c,s=h.back;if(s)return h.ack=0,(c=s.next)&&c[h.get]&&delete c[h.get],(c=s.any)&&(delete s.any,s.any={}),(c=s.ask)&&delete c[h.get],(c=s.put)&&delete c[h.get],(c=h.soul)&&delete s.root.graph[c],(c=h.map)&&Object.keys(c).forEach(function(d,m){m=c[d],m.link&&s.root.$.get(m.link).off()}),(c=h.next)&&Object.keys(c).forEach(function(d,m){m=c[d],m.$.off()}),h.on("off",{}),l};var o})(e,"./on"),e(function(a){var n=e("./index"),i=n.chain.get.next;n.chain.get.next=function(c,s){var d;return Object.plain(s)?(d=((d=s["#"])||"")["="]||d)?c.get(d):((d=c.chain()._).lex=s,c.on("in",function(m){String.match(m.get||(m.put||"")["."],s["."]||s["#"]||s)&&d.on("in",m),this.to.next(m)}),d.$):(i||l)(c,s)},n.chain.map=function(c,s,d){var m=this,$=m._,u,v;return Object.plain(c)&&(u=c["."]?c:{".":c},c=h),c?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),v=m.chain(),m.map().on(function(w,A,g,f){var y=(c||l).call(this,w,A,g,f);if(h!==y){if(w===y)return v._.on("in",g);if(n.is(y))return v._.on("in",y._);var b={};Object.keys(g.put).forEach(function(k){b[k]=g.put[k]},b),b["="]=y,v._.on("in",{get:A,put:b})}}),v):((v=$.each)||(($.each=v=m.chain())._.lex=u||v._.lex||$.lex,v._.nix=m.back("nix"),m.on("in",o,v._)),v)};function o(c){this.to.next(c);var s=this.as,d=c.$,m=d._,$=c.put,u;!m.soul&&!c.$$||(u=s.lex)&&!String.match(c.get||($||"")["."],u["."]||u["#"]||u)||n.on.link(c,s)}var l=function(){},h})(e,"./map"),e(function(a){var n=e("./index");n.chain.set=function(i,o,l){var h=this,c=h.back(-1),s,d;return o=o||function(){},l=l||{},l.item=l.item||i,(s=((i||"")._||"")["#"])&&((i={})["#"]=s),typeof(d=n.valid(i))=="string"?h.get(s=d).put(i,o,l):n.is(i)?(h.put(function(m){i.get(function($,u,v){if(!$)return o.call(h,{err:n.log('Only a node can be linked! Not "'+v.put+'"!')});(d={})[$]={"#":$},m(d)},!0)}),i):(Object.plain(i)&&(i=c.get(s=h.back("opt.uuid")()).put(i)),h.get(s||c.back("opt.uuid")(7)).put(i,o,l))}})(e,"./set"),e(function(a){e("./shim");var n=function(){},i=JSON.parseAsync||function(c,s,d){var m,$=+new Date;try{s(m,JSON.parse(c,d),o.sucks(+new Date-$))}catch(u){s(u)}},o=JSON.stringifyAsync||function(c,s,d,m){var $,u=+new Date;try{s($,JSON.stringify(c,d,m),o.sucks(+new Date-u))}catch(v){s(v)}};o.sucks=function(c){c>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),o.sucks=n)};function l(c){var s=function(){},d=c.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var m=setTimeout.turn||setTimeout,$=c.dup,u=$.check,v=$.track,w=s.hear=function(f,y){if(f){if(d.max<=f.length)return s.say({dam:"!",err:"Message too big!"},y);s===this&&(w.d+=f.length||0,++w.c);var b=y.SH=+new Date,k=f[0],S;if(k==="["){i(f,function(P,j){if(P||!j)return s.say({dam:"!",err:"DAM JSON parse error."},y);console.STAT&&console.STAT(+new Date,j.length,"# on hear batch");var E=d.puff;(function T(){for(var _=+new Date,p=0,O;p<E&&(O=j[p++]);)s.hear(O,y);j=j.slice(p),console.STAT&&console.STAT(_,+new Date-_,"hear loop"),A(y),j.length&&m(T,0)})()}),f="";return}if(k==="{"||(f["#"]||Object.plain(f))&&(S=f)){if(S)return w.one(S,y,b);i(f,function(P,j){if(P||!j)return s.say({dam:"!",err:"DAM JSON parse error."},y);w.one(j,y,b)});return}}};w.one=function(f,y,T){var k,S,P,j,E;if(f.DBG&&(f.DBG=E={DBG:f.DBG}),E&&(E.h=T),E&&(E.hp=+new Date),(k=f["#"])||(k=f["#"]=String.random(9)),!(P=u(k))&&(S=f["##"],!(S&&(P=f["@"]||f.get&&k)&&$.check(j=P+S)))){if((f._=function(){}).via=s.leap=y,(P=f["><"])&&typeof P=="string"&&P.slice(0,99).split(",").forEach(function(_){this[_]=1},f._.yo={}),P=f.dam){(P=s.hear[P])&&P(f,y,c),v(k);return}(P=f.ok)&&(f._.near=P["/"]);var T=+new Date;E&&(E.is=T),y.SI=k,v.ed=function(_){k===_&&(v.ed=0,(_=$.s[k])&&(_.via=y,f.get&&(_.it=f)))},c.on("in",s.last=f),E&&(E.hd=+new Date),console.STAT&&console.STAT(T,+new Date-T,f.get?"msg get":f.put?"msg put":"msg"),v(k),j&&v(j),s.leap=s.last=null}},w.c=w.d=0,function(){var f=0,y;s.hash=function(S,P){var j,E,T,_=+new Date;o(S.put,function p(O,D){var C=(E||(E=T=D||"")).slice(0,32768);if(j=String.hash(C,j),E=E.slice(32768),E){m(p,0);return}console.STAT&&console.STAT(_,+new Date-_,"say json+hash"),S._.$put=T,S["##"]=j,s.say(S,P),delete S._.$put},b)};function b(S,P){var j;return P instanceof Object?(Object.keys(P).sort().forEach(k,{to:j={},on:P}),j):P}function k(S){this.to[S]=this.on[S]}s.say=function(S,P){var j;if((j=this)&&(j=j.to)&&j.next&&j.next(S),!S)return!1;var E,T,_,p=S["@"],O=S._||(S._=function(){}),D=S.DBG,C=+new Date;if(O.y=O.y||C,P||D&&(D.y=C),(E=S["#"])||(E=S["#"]=String.random(9)),!y&&v(E),!(T=S["##"])&&h!==S.put&&!O.via&&p){s.hash(S,P);return}if(!P&&p&&(P=(j=$.s[p])&&(j.via||(j=j.it)&&(j=j._)&&j.via)||(j=s.last)&&p===j["#"]&&s.leap),!P&&p)return $.s[p]?void 0:(console.STAT&&console.STAT(+new Date,++f,"total no peer to ack to"),!1);if(p&&!S.put&&!T&&(($.s[p]||"").it||"")["##"])return!1;if(!P&&s.way)return s.way(S);if(D&&(D.yh=+new Date),!(_=O.raw)){s.raw(S,P);return}if(D&&(D.yr=+new Date),!P||!P.id){if(!Object.plain(P||d.peers))return!1;var C=+new Date;d.puff;var M=d.peers,x=Object.keys(P||d.peers||{});console.STAT&&console.STAT(C,+new Date-C,"peer keys"),function I(){var G=+new Date;y=1;var K=O.raw;O.raw=_;for(var W=0,J;W<9&&(J=(x||"")[W++]);)(J=M[J]||(P||"")[J])&&s.say(S,J);O.raw=K,y=0,x=x.slice(W),console.STAT&&console.STAT(G,+new Date-G,"say loop"),x.length&&(m(I,0),p&&v(p))}();return}if(!P.wire&&s.wire&&s.wire(P),E!==P.last){if(P.last=E,P===O.via||(j=O.yo)&&(j[P.url]||j[P.pid]||j[P.id]))return!1;if(console.STAT&&console.STAT(C,((D||O).yp=+new Date)-(O.y||C),"say prep"),!y&&p&&v(p),P.batch){if(P.tail=(j=P.tail||0)+_.length,P.tail<=d.pack){P.batch+=(j?",":"")+_;return}A(P)}P.batch="[";var L=+new Date;setTimeout(function(){console.STAT&&console.STAT(L,+new Date-L,"0ms TO"),A(P)},d.gap),g(_,P),console.STAT&&p===P.SI&&console.STAT(C,+new Date-P.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(S,P){if(!S)return"";var j=S._||{},E,T;if(T=j.raw)return T;if(typeof S=="string")return S;var _=S["##"],p=S["@"];if(_&&p){if(!j.via&&u(p+_))return!1;if(T=($.s[p]||"").it){if(_===T["##"])return!1;T["##"]||(T["##"]=_)}}if(!S.dam&&!S["@"]){var O=0,D=[];T=d.peers;for(var C in T){var M=T[C];if(D.push(M.url||M.pid||M.id),++O>6)break}O>1&&(S["><"]=D.join())}if(S.put&&(T=S.ok)&&(S.ok={"@":(T["@"]||1)-1,"/":T["/"]==S._.near?s.near:T["/"]}),E=j.$put){T={},Object.keys(S).forEach(function(L){T[L]=S[L]}),T.put=":])([:",o(T,function(L,N){if(!L){var I=+new Date;T=N.indexOf('"put":":])([:"'),x(h,N=N.slice(0,T+6)+E+N.slice(T+14)),console.STAT&&console.STAT(I,+new Date-I,"say slice")}});return}o(S,x);function x(L,N){L||(j.raw=N,s.say(S,P))}}}();function A(f){var y=f.batch,b=typeof y=="string";if(b&&(y+="]"),f.batch=f.tail=null,!!y&&!(b?3>y.length:!y.length)){if(!b)try{y=y.length===1?y[0]:JSON.stringify(y)}catch(k){return d.log("DAM JSON stringify error",k)}y&&g(y,f)}}function g(f,y){try{var b=y.wire;y.say?y.say(f):b.send&&b.send(f),s.say.d+=f.length||0,++s.say.c}catch{(y.queue=y.queue||[]).push(f)}}return s.near=0,s.hi=function(f){var y=f.wire,b;if(!y){s.wire(f.length&&{url:f,id:f}||f);return}f.id?d.peers[f.url||f.id]=f:(b=f.id=f.id||f.url||String.random(9),s.say({dam:"?",pid:c.opt.pid},d.peers[b]=f),delete $.s[f.last]),f.met||(s.near++,f.met=+new Date,c.on("hi",f)),b=f.queue,f.queue=[],setTimeout.each(b||[],function(k){g(k,f)},0,9)},s.bye=function(f){f.met&&--s.near,delete f.met,c.on("bye",f);var y=+new Date;y=y-(f.met||y),s.bye.time=((s.bye.time||y)+y)/2},s.hear["!"]=function(f,y){d.log("Error:",f.err)},s.hear["?"]=function(f,y){f.pid&&(y.pid||(y.pid=f.pid),f["@"])||(s.say({dam:"?",pid:d.pid,"@":f["#"]},y),delete $.s[y.last])},s.hear.mob=function(f,y){if(f.peers){var b=Object.keys(f.peers),k=b[Math.random()*b.length>>0];k&&(s.bye(y),s.hi(k))}},c.on("create",function(f){f.opt.pid=f.opt.pid||String.random(9),this.to.next(f),f.on("out",s.say)}),c.on("bye",function(f,y){f=d.peers[f.id||f]||f,this.to.next(f),f.bye?f.bye():(y=f.wire)&&y.close&&y.close(),delete d.peers[f.id],f.wire=null}),c.on("bye",function(f,y){this.to.next(f),(y=console.STAT)&&(y.peers=s.near),(y=f.url)&&setTimeout(function(){},d.lack||9e3)}),c.on("hi",function(f,y){if(this.to.next(f),(y=console.STAT)&&(y.peers=s.near),!d.super){var b=Object.keys(c.next||"");b.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(b,function(k){var S=c.next[k];if(d.super||(S.ask||"")[""]){s.say({get:{"#":k}},f);return}setTimeout.each(Object.keys(S.ask||""),function(P){P&&s.say({"##":String.hash((c.graph[k]||"")[P]),get:{"#":k,".":P}},f)})})}}),s}var h;try{a.exports=l}catch{}})(e,"./mesh"),e(function(a){var n=e("./index");n.Mesh=e("./mesh"),n.on("opt",function(o){if(this.to.next(o),o.once)return;var l=o.opt;if(l.WebSocket===!1)return;var h=n.window||{},c=l.WebSocket||h.WebSocket||h.webkitWebSocket||h.mozWebSocket;if(!c)return;l.WebSocket=c;var s=l.mesh=l.mesh||n.Mesh(o);s.wire||l.wire,s.wire=l.wire=d;function d(v){try{if(!v||!v.url)return A&&A(v);var w=v.url.replace(/^http/,"ws"),A=v.wire=new l.WebSocket(w);return A.onclose=function(){$(v),l.mesh.bye(v)},A.onerror=function(g){$(v)},A.onopen=function(){l.mesh.hi(v)},A.onmessage=function(g){g&&l.mesh.hear(g.data||g,v)},A}catch{l.mesh.bye(v)}}setTimeout(function(){!l.super&&o.on("out",{dam:"hi"})},1);var m=2*999;function $(v){clearTimeout(v.defer),l.peers[v.url]&&(u&&v.retry<=0||(v.retry=(v.retry||l.retry+1||60)-(-v.tried+(v.tried=+new Date)<m*4?1:0),v.defer=setTimeout(function w(){if(u&&u.hidden)return setTimeout(w,m);d(v)},m)))}var u=""+i!=typeof document&&document});var i})(e,"./websocket"),e(function(a){if(!(typeof Gun>"u")){var n=function(){},i;try{i=(Gun.window||n).localStorage}catch{}i||(Gun.log("Warning: No localStorage exists to persist data to!"),i={setItem:function(l,h){this[l]=h},removeItem:function(l){delete this[l]},getItem:function(l){return this[l]}});var o=JSON.stringifyAsync||function(l,h,c,s){var d;try{h(d,JSON.stringify(l,c,s))}catch(m){h(m)}};Gun.on("create",function l(h){this.to.next(h);var c=h.opt;h.graph;var s=[],d,m,$,u;if(c.localStorage===!1)return;c.prefix=c.file||"gun/";try{d=l[c.prefix]=l[c.prefix]||JSON.parse($=i.getItem(c.prefix))||{}}catch{d=l[c.prefix]={}}$=($||"").length,h.on("get",function(w){this.to.next(w);var A=w.get,g,f,y,b;!A||!(g=A["#"])||(f=d[g]||b,f&&(y=A["."])&&!Object.plain(y)&&(f=Gun.state.ify({},y,Gun.state.is(f,y),f[y],g)),Gun.on.get.ack(w,f))}),h.on("put",function(w){this.to.next(w);var A=w.put,g=A["#"],f=A["."],y=w["#"],b=w.ok||"";if(d[g]=Gun.state.ify(d[g],f,A[">"],A[":"],g),u&&$>4999880){h.on("in",{"@":y,err:"localStorage max!"});return}!w["@"]&&(!w._.via||Math.random()<b["@"]/b["/"])&&s.push(y),!m&&(m=setTimeout(v,9+$/333))});function v(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(v,99);return}var w=s;clearTimeout(m),m=!1,s=[],o(d,function(A,g){try{!A&&i.setItem(c.prefix,g)}catch(f){A=u=f||"localStorage failure"}A&&(Gun.log(A+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),h.on("localStorage:error",{err:A,get:c.prefix,put:d})),$=g.length,setTimeout.each(w,function(f){h.on("in",{"@":f,err:A,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var T;if(""+T!=typeof Gun){var e=function(_){console.warn("Warning! Deprecated internal utility will break in next version:",_)},r=Gun;r.fn=r.fn||{is:function(_){return e("fn"),!!_&&typeof _=="function"}},r.bi=r.bi||{is:function(_){return e("bi"),_ instanceof Boolean||typeof _=="boolean"}},r.num=r.num||{is:function(_){return e("num"),!a(_)&&(_-parseFloat(_)+1>=0||_===1/0||_===-1/0)}},r.text=r.text||{is:function(_){return e("text"),typeof _=="string"}},r.text.ify=r.text.ify||function(_){return e("text.ify"),r.text.is(_)?_:typeof JSON<"u"?JSON.stringify(_):_&&_.toString?_.toString():_},r.text.random=r.text.random||function(_,p){e("text.random");var O="";for(_=_||24,p=p||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";_>0;)O+=p.charAt(Math.floor(Math.random()*p.length)),_--;return O},r.text.match=r.text.match||function(_,p){var O,D;return e("text.match"),typeof _!="string"?!1:(typeof p=="string"&&(p={"=":p}),p=p||{},O=p["="]||p["*"]||p[">"]||p["<"],_===O?!0:D!==p["="]?!1:(O=p["*"]||p[">"]||p["<"],_.slice(0,(O||"").length)===O?!0:D!==p["*"]?!1:D!==p[">"]&&D!==p["<"]?_>=p[">"]&&_<=p["<"]:D!==p[">"]&&_>=p[">"]||D!==p["<"]&&_<=p["<"]))},r.text.hash=r.text.hash||function(_,p){if(e("text.hash"),typeof _=="string"){if(p=p||0,!_.length)return p;for(var O=0,D=_.length,C;O<D;++O)C=_.charCodeAt(O),p=(p<<5)-p+C,p|=0;return p}},r.list=r.list||{is:function(_){return e("list"),_ instanceof Array}},r.list.slit=r.list.slit||Array.prototype.slice,r.list.sort=r.list.sort||function(_){return e("list.sort"),function(p,O){return!p||!O?0:(p=p[_],O=O[_],p<O?-1:p>O?1:0)}},r.list.map=r.list.map||function(_,p,O){return e("list.map"),j(_,p,O)},r.list.index=1,r.obj=r.boj||{is:function(_){return e("obj"),_?_ instanceof Object&&_.constructor===Object||Object.prototype.toString.call(_).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},r.obj.put=r.obj.put||function(_,p,O){return e("obj.put"),(_||{})[p]=O,_},r.obj.has=r.obj.has||function(_,p){return e("obj.has"),_&&Object.prototype.hasOwnProperty.call(_,p)},r.obj.del=r.obj.del||function(_,p){if(e("obj.del"),!!_)return _[p]=null,delete _[p],_},r.obj.as=r.obj.as||function(_,p,O,D){return e("obj.as"),_[p]=_[p]||(D===O?{}:O)},r.obj.ify=r.obj.ify||function(_){if(e("obj.ify"),y(_))return _;try{_=JSON.parse(_)}catch{_={}}return _},function(){var _;function p(O,D){k(this,D)&&_!==this[D]||(this[D]=O)}r.obj.to=r.obj.to||function(O,D){return e("obj.to"),D=D||{},j(O,p,D),D}}(),r.obj.copy=r.obj.copy||function(_){return e("obj.copy"),_&&JSON.parse(JSON.stringify(_))},function(){function _(p,O){var D=this.n,C;if(!(D&&(O===D||y(D)&&k(D,O)))&&C!==O)return!0}r.obj.empty=r.obj.empty||function(p,O){return e("obj.empty"),p?!j(p,_,{n:O}):!0}}(),function(){function _(D,C){if(arguments.length===2){_.r=_.r||{},_.r[D]=C;return}_.r=_.r||[],_.r.push(D)}var p=Object.keys,O;Object.keys=Object.keys||function(D){return O(D,function(C,M,x){x(M)})},r.obj.map=O=r.obj.map||function(D,C,M){e("obj.map");var x,L=0,N,I,G,K,W=typeof C=="function";if(_.r=x,p&&y(D)&&(G=p(D),K=!0),M=M||{},a(D)||G)for(N=(G||D).length;L<N;L++){var J=L+r.list.index;if(W){if(I=K?C.call(M,D[G[L]],G[L],_):C.call(M,D[L],J,_),I!==x)return I}else if(C===D[K?G[L]:L])return G?G[L]:J}else for(L in D)if(W){if(k(D,L)&&(I=M?C.call(M,D[L],L,_):C(D[L],L,_),I!==x))return I}else if(C===D[L])return L;return W?_.r:r.list.index?0:-1}}(),r.time=r.time||{},r.time.is=r.time.is||function(_){return e("time"),_?_ instanceof Date:+new Date().getTime()};var g=r.fn.is,a=r.list.is,f=r.obj,y=f.is,k=f.has,j=f.map,n={};n.is=function(_){return e("val.is"),_===T?!1:_===null?!0:_===1/0?!1:l(_)||o(_)||u(_)?!0:n.link.is(_)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(p){if(e("val.link.is"),p&&p[i]&&!p._&&y(p)){var O={};if(j(p,_,O),O.id)return O.id}return!1};function _(p,O){var D=this;if(D.id)return D.id=!1;if(O==i&&l(p))D.id=p;else return D.id=!1}}(),n.link.ify=function(_){return e("val.link.ify"),P({},i,_)},r.obj.has._=".";var i=n.link._,T,o=r.bi.is,u=r.num.is,l=r.text.is,f=r.obj,y=f.is,P=f.put,j=f.map;r.val=r.val||n;var h={_:"_"};h.soul=function(_,p){return e("node.soul"),_&&_._&&_._[p||d]},h.soul.ify=function(_,p){return e("node.soul.ify"),p=typeof p=="string"?{soul:p}:p||{},_=_||{},_._=_._||{},_._[d]=p.soul||_._[d]||s(),_},h.soul._=n.link._,function(){h.is=function(p,O,D){e("node.is");var C;return y(p)&&(C=h.soul(p))?!j(p,_,{as:D,cb:O,s:C,n:p}):!1};function _(p,O){if(O!==h._){if(!n.is(p))return!0;this.cb&&this.cb.call(this.as,p,O,this.n,this.s)}}}(),function(){h.ify=function(p,O,D){return e("node.ify"),O?typeof O=="string"?O={soul:O}:typeof O=="function"&&(O={map:O}):O={},O.map&&(O.node=O.map.call(D,p,T,O.node||{})),(O.node=h.soul.ify(O.node||{},O))&&j(p,_,{o:O,as:D}),O.node};function _(p,O){var D=this.o,C,M;if(D.map){C=D.map.call(this.as,p,""+O,D.node),M===C?b(D.node,O):D.node&&(D.node[O]=C);return}n.is(p)&&(D.node[O]=p)}}();var f=r.obj,y=f.is,b=f.del,j=f.map,c=r.text,s=c.random,d=h.soul._,T;r.node=r.node||h;var m=r.state;m.lex=function(){return e("state.lex"),m().toString(36).replace(".","")},m.to=function(_,p,O){e("state.to");var D=(_||{})[p];return y(D)&&(D=E(D)),m.ify(O,p,m.is(_,p),D,h.soul(_))},function(){m.map=function(p,O,D){e("state.map");var C,M=y(M=p||O)?M:null;return p=g(p=p||O)?p:null,M&&!p?(O=u(O)?O:m(),M[w]=M[w]||{},j(M,_,{o:M,s:O}),M):(D=D||y(O)?O:C,O=u(O)?O:m(),function(x,L,N,I){if(!p)return _.call({o:N,s:O},x,L),x;p.call(D||this||{},x,L,N,I),!(k(N,L)&&C===N[L])&&_.call({o:N,s:O},x,L)})};function _(p,O){w!==O&&m.ify(this.o,O,this.s)}}();var f=r.obj;f.as;var k=f.has,y=f.is,j=f.map,E=f.copy,$=r.num,u=$.is,v=r.fn,g=v.is,w=h._,T,A={};(function(){A.is=function(O,D,C,M){return e("graph.is"),!O||!y(O)||S(O)?!1:!j(O,_,{cb:D,fn:C,as:M})};function _(O,D){if(!O||D!==h.soul(O)||!h.is(O,this.fn,this.as))return!0;this.cb&&(p.n=O,p.as=this.as,this.cb.call(p.as,O,D,p))}function p(O){O&&h.is(p.n,O,p.as)}})(),function(){A.ify=function(M,x,L){e("graph.ify");var N={path:[],obj:M};return x?typeof x=="string"?x={soul:x}:typeof x=="function"&&(x.map=x):x={},typeof L=="string"&&(x.soul=x.soul||L,L=T),x.soul&&(N.link=n.link.ify(x.soul)),x.shell=(L||{}).shell,x.graph=x.graph||{},x.seen=x.seen||[],x.as=x.as||L,_(x,N),x.root=N.node,x.graph};function _(M,x){var L;return(L=C(M,x))?L:(x.env=M,x.soul=O,h.ify(x.obj,p,x)&&(x.link=x.link||n.link.ify(h.soul(x.node)),x.obj!==M.shell&&(M.graph[n.link.is(x.link)]=x.node)),x)}function p(M,x,L){var N=this,I=N.env,G,K;if(h._===x&&k(M,n.link._))return L._;if(G=D(M,x,L,N,I)){if(x||(N.node=N.node||L||{},k(M,h._)&&h.soul(M)&&(N.node._=E(M._)),N.node=h.soul.ify(N.node,n.link.is(N.link)),N.link=N.link||n.link.ify(h.soul(N.node))),(K=I.map)&&(K.call(I.as||{},M,x,L,N),k(L,x))){if(M=L[x],T===M){b(L,x);return}if(!(G=D(M,x,L,N,I)))return}if(!x)return N.node;if(G===!0)return M;if(K=_(I,{obj:M,path:N.path.concat(x)}),!!K.node)return K.link}}function O(M){var x=this,L=n.link.is(x.link),N=x.env.graph;x.link=x.link||n.link.ify(M),x.link[n.link._]=M,x.node&&x.node[h._]&&(x.node[h._][n.link._]=M),k(N,L)&&(N[M]=N[L],b(N,L))}function D(M,x,L,N,I){var G;if(n.is(M))return!0;if(y(M))return 1;if(G=I.invalid)return M=G.call(I.as||{},M,x,L),D(M,x,L,N,I);I.err="Invalid value at '"+N.path.concat(x).join(".")+"'!",r.list.is(M)&&(I.err+=" Use `.set(item)` instead of an Array.")}function C(M,x){for(var L=M.seen,N=L.length,I;N--;)if(I=L[N],x.obj===I.obj)return I;L.push(x)}}(),A.node=function(_){e("graph.node");var p=h.soul(_);if(p)return P({},p,_)},function(){A.to=function(p,O,D){if(e("graph.to"),!!p){var C={};return D=D||{seen:{}},j(p[O],_,{obj:C,graph:p,opt:D}),C}};function _(p,O){var D,C;if(h._===O){if(S(p,n.link._))return;this.obj[O]=E(p);return}if(!(D=n.link.is(p))){this.obj[O]=p;return}if(C=this.opt.seen[D]){this.obj[O]=C;return}this.obj[O]=this.opt.seen[D]=A.to(this.graph,D,this.opt)}}();var g=r.fn.is,f=r.obj,y=f.is,b=f.del,k=f.has,S=f.empty,P=f.put,j=f.map,E=f.copy,T;r.graph=r.graph||A}}()})(nn);var oi=nn.exports,ai=oi;const ui=ii(ai);var rn={exports:{}};rn.exports;(function(t){(function(){function e(a,n){return n?ar(a):a.slice?e[i(a)]:function(o,l){a(o={exports:{}}),e[i(l)]=o.exports};function i(o){return o.split("/").slice(-1).toString().replace(".js","")}}var r=t;e(function(a){typeof self<"u"&&(a.window=self),typeof window<"u"&&(a.window=window);var n=a.window||a,i,o=n.SEA||{};(o.window=a.window)&&(o.window.SEA=o);try{i+""!=typeof r&&(r.exports=o)}catch{}a.exports=o})(e,"./root"),e(function(a){var n=e("./root");try{n.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(e,"./https"),e(function(a){var n;if(n+""==typeof btoa){if(n+""==typeof Buffer)try{Nt.Buffer=e("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}Nt.btoa=function(i){return Buffer.from(i,"binary").toString("base64")},Nt.atob=function(i){return Buffer.from(i,"base64").toString("binary")}}})(e,"./base64"),e(function(a){e("./base64");function n(){}Object.assign(n,{from:Array.from}),n.prototype=Object.create(Array.prototype),n.prototype.toString=function(i,o,l){i=i||"utf8",o=o||0;const h=this.length;if(i==="hex"){const c=new Uint8Array(this);return[...Array((l&&l+1||h)-o).keys()].map(s=>c[s+o].toString(16).padStart(2,"0")).join("")}if(i==="utf8")return Array.from({length:(l||h)-o},(c,s)=>String.fromCharCode(this[s+o])).join("");if(i==="base64")return btoa(this)},a.exports=n})(e,"./array"),e(function(a){e("./base64");var n=e("./array");function i(...o){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),i.from(...o)}i.prototype=Object.create(Array.prototype),Object.assign(i,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const o=arguments[0];let l;if(typeof o=="string"){const c=arguments[1]||"utf8";if(c==="hex"){const s=o.match(/([\da-fA-F]{2})/g).map(d=>parseInt(d,16));if(!s||!s.length)throw new TypeError("Invalid first argument for type 'hex'.");l=n.from(s)}else if(c==="utf8"||c==="binary"){const s=o.length,d=new Uint16Array(s);Array.from({length:s},(m,$)=>d[$]=o.charCodeAt($)),l=n.from(d)}else if(c==="base64"){const s=atob(o),d=s.length,m=new Uint8Array(d);Array.from({length:d},($,u)=>m[u]=s.charCodeAt(u)),l=n.from(m)}else c==="binary"?l=n.from(o):console.info("SafeBuffer.from unknown encoding: "+c);return l}if(o.byteLength,o.byteLength?o.byteLength:o.length){let c;return o instanceof ArrayBuffer&&(c=new Uint8Array(o)),n.from(c||o)}},alloc(o,l=0){return n.from(new Uint8Array(Array.from({length:o},()=>l)))},allocUnsafe(o){return n.from(new Uint8Array(Array.from({length:o})))},concat(o){if(!Array.isArray(o))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return n.from(o.reduce((l,h)=>l.concat(Array.from(h)),[]))}}),i.prototype.from=i.from,i.prototype.toString=n.prototype.toString,a.exports=i})(e,"./buffer"),e(function(a){const n=e("./root"),i={Buffer:e("./buffer")};var o={},l;if(JSON.parseAsync=JSON.parseAsync||function(c,s,d){var m;try{s(m,JSON.parse(c,d))}catch($){s($)}},JSON.stringifyAsync=JSON.stringifyAsync||function(c,s,d,m){var $;try{s($,JSON.stringify(c,d,m))}catch(u){s(u)}},i.parse=function(c,s){return new Promise(function(d,m){JSON.parseAsync(c,function($,u){$?m($):d(u)},s)})},i.stringify=function(c,s,d){return new Promise(function(m,$){JSON.stringifyAsync(c,function(u,v){u?$(u):m(v)},s,d)})},n.window&&(i.crypto=n.window.crypto||n.window.msCrypto,i.subtle=(i.crypto||o).subtle||(i.crypto||o).webkitSubtle,i.TextEncoder=n.window.TextEncoder,i.TextDecoder=n.window.TextDecoder,i.random=c=>i.Buffer.from(i.crypto.getRandomValues(new Uint8Array(i.Buffer.alloc(c))))),!i.TextDecoder){const{TextEncoder:c,TextDecoder:s}=e((l+""==typeof r?".":"")+"./lib/text-encoding",1);i.TextDecoder=s,i.TextEncoder=c}if(!i.crypto)try{var h=e("crypto",1);Object.assign(i,{crypto:h,random:s=>i.Buffer.from(h.randomBytes(s))});const{Crypto:c}=e("@peculiar/webcrypto",1);i.ossl=i.subtle=new c({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}a.exports=i})(e,"./shim"),e(function(a){var n=e("./root"),i=e("./shim"),o={};o.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},o.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},o.ecdh={name:"ECDH",namedCurve:"P-256"},o.jwk=function(l,h){l=l.split(".");var c=l[0],s=l[1],d={kty:"EC",crv:"P-256",x:c,y:s,ext:!0};return d.key_ops=h?["sign"]:["verify"],h&&(d.d=h),d},o.keyToJwk=function(l){return{kty:"oct",k:l.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),ext:!1,alg:"A256GCM"}},o.recall={validity:12*60*60,hook:function(l){return l}},o.check=function(l){return typeof l=="string"&&l.slice(0,4)==="SEA{"},o.parse=async function(h){try{var c=typeof h=="string";return c&&h.slice(0,4)==="SEA{"&&(h=h.slice(3)),c?await i.parse(h):h}catch{}return h},n.opt=o,a.exports=o})(e,"./settings"),e(function(a){var n=e("./shim");a.exports=async function(i,o){var l=typeof i=="string"?i:await n.stringify(i),h=await n.subtle.digest({name:o||"SHA-256"},new n.TextEncoder().encode(l));return n.Buffer.from(h)}})(e,"./sha256"),e(function(a){const n=e("./shim"),i=n.subtle,o=n.ossl?n.ossl:i,l=h=>o.digest({name:"SHA-1"},new ArrayBuffer(h));a.exports=l})(e,"./sha1"),e(function(a){var n=e("./root"),i=e("./shim"),o=e("./settings"),l=e("./sha256"),h;n.work=n.work||(async(c,s,d,m)=>{try{var $=(s||{}).epub||s;if(m=m||{},$ instanceof Function&&(d=$,$=h),c=typeof c=="string"?c:await i.stringify(c),(m.name||"").toLowerCase().slice(0,3)==="sha"){var u=i.Buffer.from(await l(c,m.name),"binary").toString(m.encode||"base64");if(d)try{d(u)}catch(g){console.log(g)}return u}$=$||i.random(9);var v=await(i.ossl||i.subtle).importKey("raw",new i.TextEncoder().encode(c),{name:m.name||"PBKDF2"},!1,["deriveBits"]),w=await(i.ossl||i.subtle).deriveBits({name:m.name||"PBKDF2",iterations:m.iterations||o.pbkdf2.iter,salt:new i.TextEncoder().encode(m.salt||$),hash:m.hash||o.pbkdf2.hash},v,m.length||o.pbkdf2.ks*8);c=i.random(c.length);var A=i.Buffer.from(w,"binary").toString(m.encode||"base64");if(d)try{d(A)}catch(g){console.log(g)}return A}catch(g){if(console.log(g),n.err=g,n.throw)throw g;d&&d();return}}),a.exports=n.work})(e,"./work"),e(function(a){var n=e("./root"),i=e("./shim");e("./settings"),n.name=n.name||(async(o,l)=>{try{if(o)try{o()}catch(h){console.log(h)}return}catch(h){if(console.log(h),n.err=h,n.throw)throw h;o&&o();return}}),n.pair=n.pair||(async(o,l)=>{try{var h=i.ossl||i.subtle,c=await i.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async m=>{var $={};$.priv=(await i.subtle.exportKey("jwk",m.privateKey)).d;var u=await i.subtle.exportKey("jwk",m.publicKey);return $.pub=u.x+"."+u.y,$});try{var s=await h.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async m=>{var $={};$.epriv=(await h.exportKey("jwk",m.privateKey)).d;var u=await h.exportKey("jwk",m.publicKey);return $.epub=u.x+"."+u.y,$})}catch(m){if(n.window)throw m;if(m=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw m}s=s||{};var d={pub:c.pub,priv:c.priv,epub:s.epub,epriv:s.epriv};if(o)try{o(d)}catch(m){console.log(m)}return d}catch(m){if(console.log(m),n.err=m,n.throw)throw m;o&&o();return}}),a.exports=n.pair})(e,"./pair"),e(function(a){var n=e("./root"),i=e("./shim"),o=e("./settings"),l=e("./sha256"),h;n.sign=n.sign||(async(c,s,d,m)=>{try{if(m=m||{},!(s||m).priv){if(!n.I)throw"No signing key.";s=await n.I(null,{what:c,how:"sign",why:m.why})}if(h===c)throw"`undefined` not allowed.";var $=await o.parse(c),u=m.check=m.check||$;if(n.verify&&(n.opt.check(u)||u&&u.s&&u.m)&&h!==await n.verify(u,s)){var y=await o.parse(u);if(m.raw||(y="SEA"+await i.stringify(y)),d)try{d(y)}catch(k){console.log(k)}return y}var v=s.pub,w=s.priv,A=o.jwk(v,w),g=await l($),f=await(i.ossl||i.subtle).importKey("jwk",A,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(b=>(i.ossl||i.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},b,new Uint8Array(g))),y={m:$,s:i.Buffer.from(f,"binary").toString(m.encode||"base64")};if(m.raw||(y="SEA"+await i.stringify(y)),d)try{d(y)}catch(b){console.log(b)}return y}catch(b){if(console.log(b),n.err=b,n.throw)throw b;d&&d();return}}),a.exports=n.sign})(e,"./sign"),e(function(a){var n=e("./root"),i=e("./shim"),o=e("./settings"),l=e("./sha256"),h;n.verify=n.verify||(async(d,m,$,u)=>{try{var v=await o.parse(d);if(m===!1){var w=await o.parse(v.m);if($)try{$(w)}catch(j){console.log(j)}return w}u=u||{};var A=m.pub||m,g=n.opt.slow_leak?await n.opt.slow_leak(A):await(i.ossl||i.subtle).importKey("jwk",o.jwk(A),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),f=await l(v.m),y,b,k,S;try{if(y=i.Buffer.from(v.s,u.encode||"base64"),b=new Uint8Array(y),k=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},g,b,new Uint8Array(f)),!k)throw"Signature did not match."}catch{if(n.opt.fallback)return await n.opt.fall_verify(d,m,$,u)}var P=k?await o.parse(v.m):h;if($)try{$(P)}catch(j){console.log(j)}return P}catch(j){if(console.log(j),n.err=j,n.throw)throw j;$&&$();return}}),a.exports=n.verify;var c={};n.opt.slow_leak=d=>{if(c[d])return c[d];var m=o.jwk(d);return c[d]=(i.ossl||i.subtle).importKey("jwk",m,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),c[d]};var s=n.opt;n.opt.fall_verify=async function(d,m,$,u,v){if(v===n.opt.fallback)throw"Signature did not match";v=v||1;var w=d||"";d=n.opt.unpack(d)||d;var A=await o.parse(d),g=m.pub||m,f=await n.opt.slow_leak(g),y=v<=n.opt.fallback?i.Buffer.from(await i.subtle.digest({name:"SHA-256"},new i.TextEncoder().encode(await o.parse(A.m)))):await l(A.m),b,k,S;try{if(b=i.Buffer.from(A.s,u.encode||"base64"),k=new Uint8Array(b),S=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},f,k,new Uint8Array(y)),!S)throw"Signature did not match."}catch{try{b=i.Buffer.from(A.s,"utf8"),k=new Uint8Array(b),S=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},f,k,new Uint8Array(y))}catch{if(!S)throw"Signature did not match."}}var P=S?await o.parse(A.m):h;if(s.fall_soul=w["#"],s.fall_key=w["."],s.fall_val=d,s.fall_state=w[">"],$)try{$(P)}catch(j){console.log(j)}return P},n.opt.fallback=2})(e,"./verify"),e(function(a){var n=e("./shim"),i=e("./settings"),o=e("./sha256");const l=async(h,c,s)=>{const d=h+(c||n.random(8)).toString("utf8"),m=n.Buffer.from(await o(d),"binary"),$=i.keyToJwk(m);return await n.subtle.importKey("jwk",$,{name:"AES-GCM"},!1,["encrypt","decrypt"])};a.exports=l})(e,"./aeskey"),e(function(a){var n=e("./root"),i=e("./shim");e("./settings");var o=e("./aeskey"),l;n.encrypt=n.encrypt||(async(h,c,s,d)=>{try{d=d||{};var m=(c||d).epriv||c;if(l===h)throw"`undefined` not allowed.";if(!m){if(!n.I)throw"No encryption key.";c=await n.I(null,{what:h,how:"encrypt",why:d.why}),m=c.epriv||c}var $=typeof h=="string"?h:await i.stringify(h),u={s:i.random(9),iv:i.random(15)},v=await o(m,u.s,d).then(A=>i.subtle.encrypt({name:d.name||"AES-GCM",iv:new Uint8Array(u.iv)},A,new i.TextEncoder().encode($))),w={ct:i.Buffer.from(v,"binary").toString(d.encode||"base64"),iv:u.iv.toString(d.encode||"base64"),s:u.s.toString(d.encode||"base64")};if(d.raw||(w="SEA"+await i.stringify(w)),s)try{s(w)}catch(A){console.log(A)}return w}catch(A){if(console.log(A),n.err=A,n.throw)throw A;s&&s();return}}),a.exports=n.encrypt})(e,"./encrypt"),e(function(a){var n=e("./root"),i=e("./shim"),o=e("./settings"),l=e("./aeskey");n.decrypt=n.decrypt||(async(h,c,s,d)=>{try{d=d||{};var m=(c||d).epriv||c;if(!m){if(!n.I)throw"No decryption key.";c=await n.I(null,{what:h,how:"decrypt",why:d.why}),m=c.epriv||c}var $=await o.parse(h),u,v,w;try{u=i.Buffer.from($.s,d.encode||"base64"),v=i.Buffer.from($.iv,d.encode||"base64"),w=i.Buffer.from($.ct,d.encode||"base64");var A=await l(m,u,d).then(f=>i.subtle.decrypt({name:d.name||"AES-GCM",iv:new Uint8Array(v),tagLength:128},f,new Uint8Array(w)))}catch{if(d.encode==="utf8")throw"Could not decrypt";if(n.opt.fallback)return d.encode="utf8",await n.decrypt(h,c,s,d)}var g=await o.parse(new i.TextDecoder("utf8").decode(A));if(s)try{s(g)}catch(f){console.log(f)}return g}catch(f){if(console.log(f),n.err=f,n.throw)throw f;s&&s();return}}),a.exports=n.decrypt})(e,"./decrypt"),e(function(a){var n=e("./root"),i=e("./shim");e("./settings"),n.secret=n.secret||(async(l,h,c,s)=>{try{if(s=s||{},!h||!h.epriv||!h.epub){if(!n.I)throw"No secret mix.";h=await n.I(null,{what:l,how:"secret",why:s.why})}var d=l.epub||l,m=h.epub,$=h.epriv,u=i.ossl||i.subtle,v=o(d),w=Object.assign({public:await u.importKey(...v,!0,[])},{name:"ECDH",namedCurve:"P-256"}),A=o(m,$),g=await u.importKey(...A,!1,["deriveBits"]).then(async y=>{var b=await u.deriveBits(w,y,256),k=new Uint8Array(b),S=await u.importKey("raw",k,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return u.exportKey("jwk",S).then(({k:P})=>P)}),f=g;if(c)try{c(f)}catch(y){console.log(y)}return f}catch(y){if(console.log(y),n.err=y,n.throw)throw y;c&&c();return}});var o=(l,h)=>{var[c,s]=l.split("."),d=h?{d:h}:{};return["jwk",Object.assign(d,{x:c,y:s,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};a.exports=n.secret})(e,"./secret"),e(function(a){var n=e("./root");n.certify=n.certify||(async(i,o={},l,h,c={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),i=(()=>{var f=[];if(i){if((typeof i=="string"||Array.isArray(i))&&i.indexOf("*")>-1)return"*";if(typeof i=="string")return i;if(Array.isArray(i)){if(i.length===1&&i[0])return typeof i[0]=="object"&&i[0].pub?i[0].pub:typeof i[0]=="string"?i[0]:null;i.map(y=>{typeof y=="string"?f.push(y):typeof y=="object"&&y.pub&&f.push(y.pub)})}return typeof i=="object"&&i.pub?i.pub:f.length>0?f:null}})(),!i)return console.log("No certificant found.");const d=c.expiry&&(typeof c.expiry=="number"||typeof c.expiry=="string")?parseFloat(c.expiry):null,m=(o||{}).read?o.read:null,$=(o||{}).write?o.write:typeof o=="string"||Array.isArray(o)||o["+"]||o["#"]||o["."]||o["="]||o["*"]||o[">"]||o["<"]?o:null,u=(c||{}).block||(c||{}).blacklist||(c||{}).ban||{},v=u.read&&(typeof u.read=="string"||(u.read||{})["#"])?u.read:null,w=typeof u=="string"?u:u.write&&(typeof u.write=="string"||u.write["#"])?u.write:null;if(!m&&!$)return console.log("No policy found.");const A=JSON.stringify({c:i,...d?{e:d}:{},...m?{r:m}:{},...$?{w:$}:{},...v?{rb:v}:{},...w?{wb:w}:{}});var s=await n.sign(A,l,null,{raw:1});if(c.raw||(s="SEA"+JSON.stringify(s)),h)try{h(s)}catch(f){console.log(f)}return s}catch(d){if(n.err=d,n.throw)throw d;h&&h();return}}),a.exports=n.certify})(e,"./certify"),e(function(a){var n=e("./shim"),i=e("./root");i.work=e("./work"),i.sign=e("./sign"),i.verify=e("./verify"),i.encrypt=e("./encrypt"),i.decrypt=e("./decrypt"),i.certify=e("./certify"),i.random=i.random||n.random,i.Buffer=i.Buffer||e("./buffer"),i.keyid=i.keyid||(async o=>{try{const l=n.Buffer.concat(o.replace(/-/g,"+").replace(/_/g,"/").split(".").map(d=>n.Buffer.from(d,"base64"))),h=n.Buffer.concat([n.Buffer.from([153,l.length/256,l.length%256]),l]),c=await sha1hash(h),s=n.Buffer.from(c,"binary");return s.toString("hex",s.length-8)}catch(l){throw console.log(l),l}}),((i.window||{}).GUN||{}).SEA=i,a.exports=i})(e,"./sea"),e(function(a){var n=e("./sea"),i,o;n.window?i=n.window.GUN||{chain:{}}:i=e((o+""==typeof r?".":"")+"./gun",1),n.GUN=i;function l(c){this._={$:this}}l.prototype=function(){function c(){}return c.prototype=i.chain,new c}(),l.prototype.constructor=l,i.chain.user=function(c){var s=this,m=s.back(-1),d;if(c)return c=n.opt.pub((c._||"")["#"])||c,m.get("~"+c);if(d=m.back("user"))return d;var m=m._,$=m,u=$.opt.uuid||h;return($=(d=$.user=s.chain(new l))._).opt={},$.opt.uuid=function(v){var w=u(),A=m.user;return!A||!(A=A.is)||!(A=A.pub)||(w="~"+A+"/"+w,v&&v.call&&v(null,w)),w},d};function h(){return i.state().toString(36).replace(".","")}i.User=l,l.GUN=i,l.SEA=i.SEA=n,a.exports=l})(e,"./user"),e(function(a){var n,i=""+n!=typeof GUN?GUN||{chain:{}}:e((""+n==typeof r?".":"")+"./gun",1);i.chain.then=function(o,l){var h=this,c=new Promise(function(s,d){h.once(s,l)});return o?c.then(o):c}})(e,"./then"),e(function(a){var n=e("./user"),i=n.SEA,o=n.GUN,l=function(){};n.prototype.create=function(...h){var c=typeof h[0]=="object"&&(h[0].pub||h[0].epub)?h[0]:typeof h[1]=="object"&&(h[1].pub||h[1].epub)?h[1]:null,s=c&&(c.pub||c.epub)?c.pub:typeof h[0]=="string"?h[0]:null,d=c&&(c.pub||c.epub)?c:s&&typeof h[1]=="string"?h[1]:null,m=h.filter(f=>typeof f=="function")[0]||null,$=h&&h.length>1&&typeof h[h.length-1]=="object"?h[h.length-1]:{},u=this,v=u._,w=u.back(-1);if(m=m||l,$=$||{},$.check!==!1){var A;if(s||(A="No user."),(d||"").length<8&&(A="Password too short!"),A)return m({err:o.log(A)}),u}if(v.ing)return(m||l)({err:o.log("User is already being created or authenticated!"),wait:!0}),u;v.ing=!0;var g={};return g.a=function(f){if(g.pubs=f,f&&!$.already){var y={err:o.log("User already created!")};v.ing=!1,(m||l)(y),u.leave();return}g.salt=String.random(64),i.work(d,g.salt,g.b)},g.b=function(f){g.proof=f,c?g.c(c):i.pair(g.c)},g.c=function(f){var y;g.pair=f||{},(y=v.root.user)&&(y._.sea=f,y.is={pub:f.pub,epub:f.epub,alias:s}),g.data={pub:f.pub},g.d()},g.d=function(){g.data.alias=s,g.e()},g.e=function(){g.data.epub=g.pair.epub,i.encrypt({priv:g.pair.priv,epriv:g.pair.epriv},g.proof,g.f,{raw:1})},g.f=function(f){g.data.auth=JSON.stringify({ek:f,s:g.salt}),g.g(g.data.auth)},g.g=function(f){var y;g.data.auth=g.data.auth||f,w.get(y="~"+g.pair.pub).put(g.data).on(g.h);var b={};b[y]={"#":y},w.get("~@"+s).put(b).get(y).on(g.i)},g.h=function(f,y,b,k){k.off(),g.h.ok=1,g.i()},g.i=function(f,y,b,k){k&&(g.i.ok=1,k.off()),!(!g.h.ok||!g.i.ok)&&(v.ing=!1,m({ok:0,pub:g.pair.pub}),l===m&&(c?u.auth(c):u.auth(s,d)))},w.get("~@"+s).once(g.a),u},n.prototype.leave=function(h,c){var s=this,d=s.back(-1)._.user;if(d&&(delete d.is,delete d._.is,delete d._.sea),i.window)try{var m={};m=i.window.sessionStorage,delete m.recall,delete m.pair}catch{}return s}})(e,"./create"),e(function(a){var n=e("./user"),i=n.SEA,o=n.GUN,l=function(){};n.prototype.auth=function(...c){var s=typeof c[0]=="object"&&(c[0].pub||c[0].epub)?c[0]:typeof c[1]=="object"&&(c[1].pub||c[1].epub)?c[1]:null,d=!s&&typeof c[0]=="string"?c[0]:null,m=(d||s&&!(s.priv&&s.epriv))&&typeof c[1]=="string"?c[1]:null,$=c.filter(b=>typeof b=="function")[0]||null,u=c&&c.length>1&&typeof c[c.length-1]=="object"?c[c.length-1]:{},v=this,w=v._,A=v.back(-1);if(w.ing)return($||l)({err:o.log("User is already being created or authenticated!"),wait:!0}),v;w.ing=!0;var g={},f,y=9;return g.a=function(b){if(!b)return g.b();if(!b.pub){var k=[];return Object.keys(b).forEach(function(S){S!="_"&&k.push(b[S])}),g.b(k)}if(g.name)return g.f(b);g.c((g.data=b).auth)},g.b=function(b){var k=(g.list=(g.list||[]).concat(b||[])).shift();if(f===k){if(g.name)return g.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.");if(d&&y--){A.get("~@"+d).once(g.a);return}return g.err("Wrong user or password.")}A.get(k).once(g.a)},g.c=function(b){if(f===b)return g.b();if(typeof b=="string")return g.c(h(b));i.work(m,(g.auth=b).s,g.d,g.enc)},g.d=function(b){i.decrypt(g.auth.ek,b,g.e,g.enc)},g.e=function(b){if(f===b)return g.enc?(g.enc=null,g.b()):(g.enc={encode:"utf8"},g.c(g.auth));g.half=b,g.f(g.data)},g.f=function(b){var k=g.half||{},S=g.data||{};g.g(g.lol={pub:b.pub||S.pub,epub:b.epub||S.epub,priv:b.priv||k.priv,epriv:b.epriv||k.epriv})},g.g=function(b){if(!b||!b.pub||!b.epub)return g.b();g.pair=b;var k=A._.user,S=k._;S.tag;var P=S.opt;S=k._=A.get("~"+b.pub)._,S.opt=P,k.is={pub:b.pub,epub:b.epub,alias:d||b.pub},S.sea=g.pair,w.ing=!1;try{m&&f==(h(w.root.graph["~"+b.pub].auth)||"")[":"]&&(u.shuffle=u.change=m)}catch{}if(u.change?g.z():($||l)(S),i.window&&(v.back("user")._.opt||u).remember)try{var j={};j=i.window.sessionStorage,j.recall=!0,j.pair=JSON.stringify(b)}catch{}try{A._.tag.auth?A._.on("auth",S):setTimeout(function(){A._.on("auth",S)},1)}catch(E){o.log("Your 'auth' callback crashed with:",E)}},g.h=function(b){if(!b)return g.b();if(d=b.alias,d||(d=b.alias="~"+s.pub),!b.auth)return g.g(s);s=null,g.c((g.data=b).auth)},g.z=function(){g.salt=String.random(64),i.work(u.change,g.salt,g.y)},g.y=function(b){i.encrypt({priv:g.pair.priv,epriv:g.pair.epriv},b,g.x,{raw:1})},g.x=function(b){g.w(JSON.stringify({ek:b,s:g.salt}))},g.w=function(b){if(u.shuffle){console.log("migrate core account from UTF8 & shuffle");var k={};Object.keys(g.data).forEach(function(S){k[S]=g.data[S]}),delete k._,k.auth=b,A.get("~"+g.pair.pub).put(k)}A.get("~"+g.pair.pub).get("auth").put(b,$||l)},g.err=function(b){var k={err:o.log(b||"User cannot be found!")};w.ing=!1,($||l)(k)},g.plugin=function(b){if(!(g.name=b))return g.err();var k=[b];b[0]!=="~"&&(k[1]="~"+b,k[2]="~@"+b),g.b(k)},s?s.priv&&s.epriv?g.g(s):A.get("~"+s.pub).once(g.h):d?A.get("~@"+d).once(g.a):!d&&!m&&i.name(g.plugin),v};function h(c){if(typeof c!="string")return c;try{c=JSON.parse(c)}catch{c={}}return c}})(e,"./auth"),e(function(a){var n=e("./user"),i=n.SEA;n.GUN,n.prototype.recall=function(o,l){var h=this,c=h.back(-1);if(o=o||{},o&&o.sessionStorage){if(i.window)try{var s={};s=i.window.sessionStorage,s&&(c._.opt.remember=!0,(h.back("user")._.opt||o).remember=!0,(s.recall||s.pair)&&c.user().auth(JSON.parse(s.pair),l))}catch{}return h}return h}})(e,"./recall"),e(function(a){var n=e("./user"),i=n.SEA,o=n.GUN,l=function(){};n.prototype.pair=function(){var h=this,c;try{c=new Proxy({DANGER:"☠"},{get:function(s,d,m){if(!(!h.is||!(h._||"").sea))return h._.sea[d]}})}catch{}return c},n.prototype.delete=async function(h,c,s){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var d=this;d.back(-1);var m=d.back("user");try{m.auth(h,c,function($){var u=(m.is||{}).pub;m.map().once(function(){this.put(null)}),m.leave(),(s||l)({ok:0})})}catch($){o.log("User.delete failed! Error:",$)}return d},n.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const h=this.back(-1);try{return await authRecall(h),h._.user._}catch{const s="No session!";throw o.log(s),{err:s}}},n.prototype.trust=async function(h){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),o.is(h)&&h.get("pub").get((c,s)=>{console.log(c,s)}),h.get("trust").get(path).put(theirPubkey)},n.prototype.grant=function(h,c){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var s=this,d=s.back(-1).user(),m=d._.sea,$="";return s.back(function(u){u.is||($+=u.get||"")}),async function(){var u,v=await d.get("grant").get(m.pub).get($).then();v=await i.decrypt(v,m),v||(v=i.random(16).toString(),u=await i.encrypt(v,m),d.get("grant").get(m.pub).get($).put(u));var w=h.get("pub").then(),A=h.get("epub").then();w=await w,A=await A;var g=await i.secret(A,m);u=await i.encrypt(v,g),d.get("grant").get(w).get($).put(u,c)}(),s},n.prototype.secret=function(h,c){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var s=this,d=s.back(-1).user(),m=d.pair(),$="";return s.back(function(u){u.is||($+=u.get||"")}),async function(){var u,v=await d.get("trust").get(m.pub).get($).then();v=await i.decrypt(v,m),v||(v=i.random(16).toString(),u=await i.encrypt(v,m),d.get("trust").get(m.pub).get($).put(u)),u=await i.encrypt(h,v),s.put(u,c)}(),s},a.exports=n})(e,"./share"),e(function(a){var n=e("./sea"),i=e("./settings"),o,l=(n.window||"").GUN||e((""+o==typeof r?".":"")+"./gun",1);l.on("opt",function(u){u.sea||(u.sea={own:{}},u.on("put",h,u)),this.to.next(u)});function h(u){var v=this,w=v.as,A=u.put,g=A["#"],f=A["."],y=A[":"],b=A[">"],k=u["#"],S;if(!(!g||!f)){if((u._||"").faith&&(w.opt||"").faith&&typeof u._=="function"){n.opt.pack(A,function(j){n.verify(j,!1,function(E){A["="]=n.opt.unpack(E),v.to.next(u)})});return}var P=function(j){w.on("in",{"@":k,err:u.err=j})};if((u._||"").DBG&&((u._||"").DBG.c=+new Date),0<=g.indexOf("<?")&&(S=parseFloat(g.split("<?")[1]||""),S&&b<l.state()-S*1e3)){(S=u._)&&S.stun&&S.stun--;return}if(g==="~@"){h.alias(v,u,y,f,g,w,P);return}if(g.slice(0,2)==="~@"){h.pubs(v,u,y,f,g,w,P);return}if(S=n.opt.pub(g)){h.pub(v,u,y,f,g,w,P,w.user||"",S);return}if(0<=g.indexOf("#")){h.hash(v,u,y,f,g,w,P);return}h.any(v,u,y,f,g,w,P,w.user||"")}}h.hash=function(u,v,w,A,g,f,y){n.work(w,null,function(b){function k(S){let P="";for(let j=0;j<S.length;j++)P+=j-1&1?"":String.fromCharCode(parseInt(S.substring(j-1,j+1),16));return btoa(P)}if(b&&b===A.split("#").slice(-1)[0])return u.to.next(v);if(b&&b===k(A.split("#").slice(-1)[0]))return u.to.next(v);y("Data hash not same as hash!")},{name:"SHA-256"})},h.alias=function(u,v,w,A,g,f,y){if(!w)return y("Data must exist!");if("~@"+A===s(w))return u.to.next(v);y("Alias not same!")},h.pubs=function(u,v,w,A,g,f,y){if(!w)return y("Alias must exist!");if(A===s(w))return u.to.next(v);y("Alias not same!")},h.pub=async function(u,v,w,A,g,f,y,b,k){var S;const P=await i.parse(w)||{},j=(E,T,_)=>{if(E.m&&E.s&&T&&k)return n.verify(E,k,p=>{if(o!==p&&o!==p.e&&v.put[">"]&&v.put[">"]>parseFloat(p.e))return y("Certificate expired.");if(o!==p&&p.c&&p.w&&(p.c===T||p.c.indexOf("*")>-1)){let D=g.indexOf("/")>-1?g.replace(g.substring(0,g.indexOf("/")+1),""):"";String.match=String.match||l.text.match;const C=Array.isArray(p.w)?p.w:typeof p.w=="object"||typeof p.w=="string"?[p.w]:[];for(const M of C)if(String.match(D,M["#"])&&String.match(A,M["."])||!M["."]&&String.match(D,M["#"])||!M["#"]&&String.match(A,M["."])||String.match(D?D+"/"+A:A,M["#"]||M)){if(M["+"]&&M["+"].indexOf("*")>-1&&D&&D.indexOf(T)==-1&&A.indexOf(T)==-1)return y(`Path "${D}" or key "${A}" must contain string "${T}".`);if(p.wb&&(typeof p.wb=="string"||(p.wb||{})["#"])){var O=u.as.root.$.back(-1);return typeof p.wb=="string"&&p.wb.slice(0,1)!=="~"&&(O=O.get("~"+k)),O.get(p.wb).get(T).once(x=>x&&(x===1||x===!0)?y(`Certificant ${T} blocked.`):_(p))}return _(p)}return y("Certificate verification fail.")}})};if(A==="pub"&&"~"+k===g)return w===k?u.to.next(v):y("Account not same!");if((S=b.is)&&S.pub&&!P["*"]&&!P["+"]&&(k===S.pub||k!==S.pub&&((v._.msg||{}).opt||{}).cert)){n.opt.pack(v.put,E=>{n.sign(E,b._.sea,async function(T){if(o===T)return y(n.err||"Signature fail.");if(v.put[":"]={":":S=n.opt.unpack(T.m),"~":T.s},v.put["="]=S,k===b.is.pub){(S=s(w))&&((f.sea.own[S]=f.sea.own[S]||{})[k]=1),JSON.stringifyAsync(v.put[":"],function(_,p){return _?y(_||"Stringify error."):(v.put[":"]=p,u.to.next(v))});return}if(k!==b.is.pub&&((v._.msg||{}).opt||{}).cert){const _=await i.parse(v._.msg.opt.cert);_&&_.m&&_.s&&j(_,b.is.pub,p=>{v.put[":"]["+"]=_,v.put[":"]["*"]=b.is.pub,JSON.stringifyAsync(v.put[":"],function(O,D){return O?y(O||"Stringify error."):(v.put[":"]=D,u.to.next(v))})})}},{raw:1})});return}n.opt.pack(v.put,E=>{n.verify(E,P["*"]||k,function(T){var _;if(T=n.opt.unpack(T),o===T)return y("Unverified data.");if((_=s(T))&&k===n.opt.pub(_)&&((f.sea.own[_]=f.sea.own[_]||{})[k]=1),P["+"]&&P["+"].m&&P["+"].s&&P["*"])j(P["+"],P["*"],p=>(v.put["="]=T,u.to.next(v)));else return v.put["="]=T,u.to.next(v)})})},h.any=function(u,v,w,A,g,f,y,b){if(f.opt.secure)return y("Soul missing public key at '"+A+"'.");f.on("secure",function(k){if(this.off(),!f.opt.secure)return u.to.next(k);y("Data cannot be changed.")}).on.on("secure",v)};var c=l.valid,s=function(u,v){return typeof(v=c(u))=="string"&&v};(l.state||"").ify;var d=/[^\w_-]/;n.opt.pub=function(u){if(u&&(u=u.split("~"),!(!u||!(u=u[1]))&&(u=u.split(d).slice(0,2),!(!u||u.length!=2)&&(u[0]||"")[0]!=="@")))return u=u.slice(0,2).join("."),u},n.opt.stringy=function(u){},n.opt.pack=function(u,v,w,A,g){var f,y;if(n.opt.check(u))return v(u);u&&u["#"]&&u["."]&&u[">"]&&(f=u[":"],y=1),JSON.parseAsync(y?f:u,function(b,k){var S=o!==(k||"")[":"]&&(k||"")["~"];if(!S){v(u);return}v({m:{"#":g||u["#"],".":w||u["."],":":(k||"")[":"],">":u[">"]||l.state.is(A,w)},s:S})})};var m=n.opt;n.opt.unpack=function(u,v,w){var A;if(o!==u){if(u&&o!==(A=u[":"]))return A;if(v=v||m.fall_key,!w&&m.fall_val&&(w={},w[v]=m.fall_val),!(!v||!w)){if(u===w[v]||!n.opt.check(w[v]))return u;var g=w&&w._&&w._["#"]||m.fall_soul,f=l.state.is(w,v)||m.fall_state;if(u&&u.length===4&&g===u[0]&&v===u[1]&&$(f)===$(u[3]))return u[2];if(f<n.opt.shuffle_attack)return u}}},n.opt.shuffle_attack=15463296e5;var $=Math.floor})(e,"./index")})()})(rn);rn.exports;const nt=ui("https://gun-manhattan.herokuapp.com/gun"),on=nt.get("circles-b979fe7c-ebfd-11ed-a05b-0242ac120003");on.get("index-4723d6a2-ecbd-11ed-a05b-0242ac120003");const fi=on.get("circles");on.get("nodes");const[se,an]=ri({circleRef:null,userRef:null,isLoggedIn:!1,userLocation:void 0}),ur=t=>{an("userRef",t)},fr=t=>{an("isLoggedIn",t)},si=t=>{an("userLocation",t),se.userRef&&se.userRef.get("location").put(t)},li=$e('<dialog class="bg-transparent"><div class="bg-white p-8 rounded-lg shadow-lg"><h2 class="text-2xl font-bold mb-6">Log in / Sign up</h2><div class="mb-4"><label for="username" class="block text-sm mb-2">Username:</label><input id="username" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md"></div><div class="mb-6"><label for="password" class="block text-sm mb-2">Password:</label><input id="password" type="password" class="w-full px-3 py-2 border border-gray-300 rounded-md"></div><button type="button" class="bg-blue-500 text-white font-semibold px-6 py-2 rounded-md hover:bg-blue-600">Log in</button><button type="button" class="bg-blue-500 text-white font-semibold px-6 py-2 rounded-md hover:bg-blue-600 ml-4">Sign up'),ci=$e('<button type="button" class="absolute top-2 right-2 bg-blue-500 text-white font-semibold px-6 py-2 rounded-md hover:bg-blue-600">Sign out'),di=()=>{nt.user().leave(),localStorage.removeItem("userCredentials"),fr(!1),ur(null)};function hi(){const[t,e]=H(""),[r,a]=H(""),n="userCredentials",[i,o]=H(!0);let l;De(()=>{const $=localStorage.getItem(n);if($){const{username:u,password:v}=JSON.parse($);console.log("storedCredentials",$),c(u,v)}else o(!1)}),De(()=>{l&&!se.isLoggedIn&&!i()&&(console.log("showing dialog"),l.showModal())});const h=$=>{const u="Anonymous";se.userRef.put({name:u},w=>{w.err?console.error("Failed to create user circle:",w.err):console.log("User circle created:",$)})},c=($,u)=>{const v=nt.user(),w=A=>{if(A.err)console.error("Authentication error:",A.err);else{if(!v.is){console.error("Authentication error");return}let g=v.is.pub;const f=fi.get(g);ur(f),f.once(y=>{y||h(g)}),console.log("log user public key",v.is?.pub),fr(!0),localStorage.setItem(n,JSON.stringify({username:$,password:u})),l.close()}o(!1)};v.auth($,u,w)},s=($,u)=>{nt.user().create($,u,w=>{w.err?console.error("User creation error:",w.err):c($,u)})},d=$=>{$.preventDefault(),c(t(),r())},m=$=>{$.preventDefault(),s(t(),r())};return[(()=>{const $=li(),u=$.firstChild,v=u.firstChild,w=v.nextSibling,A=w.firstChild,g=A.nextSibling,f=w.nextSibling,y=f.firstChild,b=y.nextSibling,k=f.nextSibling,S=k.nextSibling,P=l;return typeof P=="function"?Mr(P,$):l=$,g.$$input=j=>e(j.target.value),b.$$input=j=>a(j.target.value),k.$$click=d,S.$$click=m,te(()=>g.value=t()),te(()=>b.value=r()),$})(),Q((()=>{const $=Q(()=>!!se.isLoggedIn);return()=>$()&&(()=>{const u=ci();return u.$$click=di,u})()})())]}ot(["input","click"]);var sr={},at={},X={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.areaConversion=U.timeConversion=U.distanceConversion=U.altitudeKeys=U.latitudeKeys=U.longitudeKeys=U.MAXLON=U.MINLON=U.MAXLAT=U.MINLAT=U.earthRadius=U.sexagesimalPattern=void 0;var pi=/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['′]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["″]\s*)?([NEOSW]?)$/;U.sexagesimalPattern=pi;var gi=6378137;U.earthRadius=gi;var vi=-90;U.MINLAT=vi;var yi=90;U.MAXLAT=yi;var mi=-180;U.MINLON=mi;var bi=180;U.MAXLON=bi;var wi=["lng","lon","longitude",0];U.longitudeKeys=wi;var _i=["lat","latitude",1];U.latitudeKeys=_i;var $i=["alt","altitude","elevation","elev",2];U.altitudeKeys=$i;var Si={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};U.distanceConversion=Si;var Ai={m:60,h:3600,d:86400};U.timeConversion=Ai;var ee={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};U.areaConversion=ee;ee.sqm=ee.m2;ee.sqkm=ee.km2;ee.sqft=ee.ft2;ee.sqyd=ee.yd2;ee.sqin=ee.in2;var pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.default=void 0;var Oi=function(e,r){return r.reduce(function(a,n){if(typeof e>"u"||e===null)throw new Error("'".concat(e,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(e,n)&&typeof n<"u"&&typeof a>"u"?(a=n,n):a},void 0)},ki=Oi;pe.default=ki;var Se={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.default=void 0;var Di=function(e){var r=e.toString().trim();return isNaN(parseFloat(r))?!1:parseFloat(r)===Number(r)},Pi=Di;ge.default=Pi;var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.default=void 0;var xi=U,ji=function(e){return xi.sexagesimalPattern.test(e.toString().trim())},Ti=ji;ve.default=Ti;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.default=void 0;var Mi=U,Ei=function(e){var r=new RegExp(Mi.sexagesimalPattern).exec(e.toString().trim());if(typeof r>"u"||r===null)throw new Error("Given value is not in sexagesimal format");var a=Number(r[2])/60||0,n=Number(r[4])/3600||0,i=parseFloat(r[1])+a+n;return["S","W"].includes(r[7])?-i:i},Ci=Ei;ye.default=Ci;var Me={},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.default=void 0;var Rt=U,Bt=Li(pe);function Li(t){return t&&t.__esModule?t:{default:t}}function mn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Ni(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mn(Object(r),!0).forEach(function(a){Ri(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Ri(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Bi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{longitude:Rt.longitudeKeys,latitude:Rt.latitudeKeys,altitude:Rt.altitudeKeys},a=(0,Bt.default)(e,r.longitude),n=(0,Bt.default)(e,r.latitude),i=(0,Bt.default)(e,r.altitude);return Ni({latitude:n,longitude:a},i?{altitude:i}:{})},Ii=Bi;Ae.default=Ii;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.default=void 0;var Gi=un(ge),Ui=un(ve),Ki=un(ye),bn=U;function un(t){return t&&t.__esModule?t:{default:t}}var Wi=function t(e){return(0,Gi.default)(e)?!(parseFloat(e)>bn.MAXLAT||e<bn.MINLAT):(0,Ui.default)(e)?t((0,Ki.default)(e)):!1},qi=Wi;Ee.default=qi;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.default=void 0;var Fi=fn(ge),Ji=fn(ve),Hi=fn(ye),wn=U;function fn(t){return t&&t.__esModule?t:{default:t}}var Vi=function t(e){return(0,Fi.default)(e)?!(parseFloat(e)>wn.MAXLON||e<wn.MINLON):(0,Ji.default)(e)?t((0,Hi.default)(e)):!1},Xi=Vi;Ce.default=Xi;Object.defineProperty(Me,"__esModule",{value:!0});Me.default=void 0;var zi=sn(Ae),_n=sn(Ee),$n=sn(Ce);function sn(t){return t&&t.__esModule?t:{default:t}}var Yi=function(e){var r=(0,zi.default)(e),a=r.latitude,n=r.longitude;if(Array.isArray(e)&&e.length>=2)return(0,$n.default)(e[0])&&(0,_n.default)(e[1]);if(typeof a>"u"||typeof n>"u")return!1;var i=e[n],o=e[a];return!(typeof o>"u"||typeof i>"u"||(0,_n.default)(o)===!1||(0,$n.default)(i)===!1)},Zi=Yi;Me.default=Zi;Object.defineProperty(Se,"__esModule",{value:!0});Se.default=void 0;var Qi=Le(ge),eo=Le(ve),to=Le(ye),Sn=Le(Me),no=Le(Ae);function Le(t){return t&&t.__esModule?t:{default:t}}function An(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?An(Object(r),!0).forEach(function(a){Zt(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Zt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ro=function t(e){if((0,Qi.default)(e))return Number(e);if((0,eo.default)(e))return(0,to.default)(e);if((0,Sn.default)(e)){var r=(0,no.default)(e);return Array.isArray(e)?e.map(function(a,n){return[0,1].includes(n)?t(a):a}):It(It(It({},e),r.latitude&&Zt({},r.latitude,t(e[r.latitude]))),r.longitude&&Zt({},r.longitude,t(e[r.longitude])))}return Array.isArray(e)?e.map(function(a){return(0,Sn.default)(a)?t(a):a}):e},io=ro;Se.default=io;Object.defineProperty(X,"__esModule",{value:!0});X.default=void 0;var oo=U,ao=lr(pe),uo=lr(Se);function lr(t){return t&&t.__esModule?t:{default:t}}var fo=function(e,r){var a=(0,ao.default)(e,oo.latitudeKeys);if(!(typeof a>"u"||a===null)){var n=e[a];return r===!0?n:(0,uo.default)(n)}},so=fo;X.default=so;var z={};Object.defineProperty(z,"__esModule",{value:!0});z.default=void 0;var lo=U,co=cr(pe),ho=cr(Se);function cr(t){return t&&t.__esModule?t:{default:t}}var po=function(e,r){var a=(0,co.default)(e,lo.longitudeKeys);if(!(typeof a>"u"||a===null)){var n=e[a];return r===!0?n:(0,ho.default)(n)}},go=po;z.default=go;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.default=void 0;var vo=function(e){return e*Math.PI/180},yo=vo;Z.default=yo;var ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.default=void 0;var mo=function(e){return e*180/Math.PI},bo=mo;ue.default=bo;Object.defineProperty(at,"__esModule",{value:!0});at.default=void 0;var wo=ut(X),_o=ut(z),Gt=ut(Z),Ut=ut(ue),On=U;function ut(t){return t&&t.__esModule?t:{default:t}}var $o=function(e,r,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:6371e3,i=(0,wo.default)(e),o=(0,_o.default)(e),l=r/n,h=(0,Gt.default)(a),c=(0,Gt.default)(i),s=(0,Gt.default)(o),d=Math.asin(Math.sin(c)*Math.cos(l)+Math.cos(c)*Math.sin(l)*Math.cos(h)),m=s+Math.atan2(Math.sin(h)*Math.sin(l)*Math.cos(c),Math.cos(l)-Math.sin(c)*Math.sin(d)),$=(0,Ut.default)(m);return($<On.MINLON||$>On.MAXLON)&&(m=(m+3*Math.PI)%(2*Math.PI)-Math.PI,$=(0,Ut.default)(m)),{latitude:(0,Ut.default)(d),longitude:$}},So=$o;at.default=So;var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.default=void 0;var Ao=U,Oo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",a=Ao.areaConversion[r];if(a)return e*a;throw new Error("Invalid unit used for area conversion.")},ko=Oo;ft.default=ko;var st={};Object.defineProperty(st,"__esModule",{value:!0});st.default=void 0;var Do=U,Po=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"m",a=Do.distanceConversion[r];if(a)return e*a;throw new Error("Invalid unit used for distance conversion.")},xo=Po;st.default=xo;var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.default=void 0;var We=U,jo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"kmh";switch(r){case"kmh":return e*We.timeConversion.h*We.distanceConversion.km;case"mph":return e*We.timeConversion.h*We.distanceConversion.mi;default:return e}},To=jo;lt.default=To;var ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.default=void 0;function kn(t,e){return Lo(t)||Co(t,e)||Eo(t,e)||Mo()}function Mo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eo(t,e){if(t){if(typeof t=="string")return Dn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dn(t,e)}}function Dn(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function Co(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],a=!0,n=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));a=!0);}catch(h){n=!0,i=h}finally{try{!a&&o.return!=null&&o.return()}finally{if(n)throw i}}return r}}function Lo(t){if(Array.isArray(t))return t}var No=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4,a=Math.pow(10,r);return Math.round(e*a)/a},Ro=function(e){var r=e.toString().split("."),a=kn(r,2),n=a[0],i=a[1],o=Math.abs(Number(n)),l=+("0."+(i||0))*60,h=l.toString().split("."),c=Math.floor(l),s=No(+("0."+(h[1]||0))*60).toString(),d=s.split("."),m=kn(d,2),$=m[0],u=m[1],v=u===void 0?"0":u;return o+"° "+c.toString().padStart(2,"0")+"' "+$.padStart(2,"0")+"."+v.padEnd(1,"0")+'"'},Bo=Ro;ct.default=Bo;var dt={},Ne={},re={},Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.default=void 0;var Io=function(e){return e>1?1:e<-1?-1:e},Go=Io;Re.default=Go;Object.defineProperty(re,"__esModule",{value:!0});re.default=void 0;var Pn=ht(X),xn=ht(z),be=ht(Z),Uo=ht(Re),Ko=U;function ht(t){return t&&t.__esModule?t:{default:t}}var Wo=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;a=typeof a<"u"&&!isNaN(a)?a:1;var n=(0,Pn.default)(e),i=(0,xn.default)(e),o=(0,Pn.default)(r),l=(0,xn.default)(r),h=Math.acos((0,Uo.default)(Math.sin((0,be.default)(o))*Math.sin((0,be.default)(n))+Math.cos((0,be.default)(o))*Math.cos((0,be.default)(n))*Math.cos((0,be.default)(i)-(0,be.default)(l))))*Ko.earthRadius;return Math.round(h/a)*a},qo=Wo;re.default=qo;Object.defineProperty(Ne,"__esModule",{value:!0});Ne.default=void 0;var jn=Fo(re);function Fo(t){return t&&t.__esModule?t:{default:t}}var Jo=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jn.default;return a=typeof a=="function"?a:jn.default,r.slice().sort(function(n,i){return a(e,n)-a(e,i)})},Ho=Jo;Ne.default=Ho;Object.defineProperty(dt,"__esModule",{value:!0});dt.default=void 0;var Vo=Xo(Ne);function Xo(t){return t&&t.__esModule?t:{default:t}}var zo=function(e,r){return(0,Vo.default)(e,r)[0]},Yo=zo;dt.default=Yo;var pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.default=void 0;var Kt=ln(Z),Zo=ln(X),Tn=ln(z),Mn=U;function ln(t){return t&&t.__esModule?t:{default:t}}var Qo=function(e){var r=0;if(e.length>2){for(var a,n,i,o=0;o<e.length;o++){o===e.length-2?(a=e.length-2,n=e.length-1,i=0):o===e.length-1?(a=e.length-1,n=0,i=1):(a=o,n=o+1,i=o+2);var l=(0,Tn.default)(e[a]),h=(0,Zo.default)(e[n]),c=(0,Tn.default)(e[i]);r+=((0,Kt.default)(c)-(0,Kt.default)(l))*Math.sin((0,Kt.default)(h))}r=r*Mn.earthRadius*Mn.earthRadius/2}return Math.abs(r)},ea=Qo;pt.default=ea;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.default=void 0;var ta=dr(X),na=dr(z);function dr(t){return t&&t.__esModule?t:{default:t}}var ra=function(e){if(Array.isArray(e)===!1||e.length===0)throw new Error("No points were given.");return e.reduce(function(r,a){var n=(0,ta.default)(a),i=(0,na.default)(a);return{maxLat:Math.max(n,r.maxLat),minLat:Math.min(n,r.minLat),maxLng:Math.max(i,r.maxLng),minLng:Math.min(i,r.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})},ia=ra;Be.default=ia;var gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.default=void 0;var oa=vt(X),aa=vt(z),we=vt(Z),qe=vt(ue),Oe=U;function vt(t){return t&&t.__esModule?t:{default:t}}var ua=function(e,r){var a=(0,oa.default)(e),n=(0,aa.default)(e),i=(0,we.default)(a),o=(0,we.default)(n),l=r/Oe.earthRadius,h=i-l,c=i+l,s=(0,we.default)(Oe.MAXLAT),d=(0,we.default)(Oe.MINLAT),m=(0,we.default)(Oe.MAXLON),$=(0,we.default)(Oe.MINLON),u,v;if(h>d&&c<s){var w=Math.asin(Math.sin(l)/Math.cos(i));u=o-w,u<$&&(u+=Math.PI*2),v=o+w,v>m&&(v-=Math.PI*2)}else h=Math.max(h,d),c=Math.min(c,s),u=$,v=m;return[{latitude:(0,qe.default)(h),longitude:(0,qe.default)(u)},{latitude:(0,qe.default)(c),longitude:(0,qe.default)(v)}]},fa=ua;gt.default=fa;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.default=void 0;var sa=mt(X),la=mt(z),En=mt(Z),Cn=mt(ue);function mt(t){return t&&t.__esModule?t:{default:t}}var ca=function(e){if(Array.isArray(e)===!1||e.length===0)return!1;var r=e.length,a=e.reduce(function(l,h){var c=(0,En.default)((0,sa.default)(h)),s=(0,En.default)((0,la.default)(h));return{X:l.X+Math.cos(c)*Math.cos(s),Y:l.Y+Math.cos(c)*Math.sin(s),Z:l.Z+Math.sin(c)}},{X:0,Y:0,Z:0}),n=a.X/r,i=a.Y/r,o=a.Z/r;return{longitude:(0,Cn.default)(Math.atan2(i,n)),latitude:(0,Cn.default)(Math.atan2(o,Math.sqrt(n*n+i*i)))}},da=ca;yt.default=da;var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.default=void 0;var ha=pa(Be);function pa(t){return t&&t.__esModule?t:{default:t}}var ga=function(e){var r=(0,ha.default)(e),a=r.minLat+(r.maxLat-r.minLat)/2,n=r.minLng+(r.maxLng-r.minLng)/2;return{latitude:parseFloat(a.toFixed(6)),longitude:parseFloat(n.toFixed(6))}},va=ga;bt.default=va;var wt={},Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.default=void 0;var Ln=_t(X),Nn=_t(z),Fe=_t(Z),ya=_t(ue);function _t(t){return t&&t.__esModule?t:{default:t}}var ma=function(e,r){var a=(0,Fe.default)((0,Nn.default)(r))-(0,Fe.default)((0,Nn.default)(e)),n=Math.log(Math.tan((0,Fe.default)((0,Ln.default)(r))/2+Math.PI/4)/Math.tan((0,Fe.default)((0,Ln.default)(e))/2+Math.PI/4));return Math.abs(a)>Math.PI&&(a>0?a=(Math.PI*2-a)*-1:a=Math.PI*2+a),((0,ya.default)(Math.atan2(a,n))+360)%360},ba=ma;Ie.default=ba;Object.defineProperty(wt,"__esModule",{value:!0});wt.default=void 0;var Rn=wa(Ie);function wa(t){return t&&t.__esModule?t:{default:t}}var _a=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rn.default,n=typeof a=="function"?a(e,r):(0,Rn.default)(e,r);if(isNaN(n))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(n/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}},$a=_a;wt.default=$a;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.default=void 0;var Wt=hr(re),Bn=hr(Re);function hr(t){return t&&t.__esModule?t:{default:t}}var Sa=function(e,r,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,i=(0,Wt.default)(r,e,n),o=(0,Wt.default)(e,a,n),l=(0,Wt.default)(r,a,n),h=Math.acos((0,Bn.default)((i*i+l*l-o*o)/(2*i*l))),c=Math.acos((0,Bn.default)((o*o+l*l-i*i)/(2*o*l)));return h>Math.PI/2?i:c>Math.PI/2?o:Math.sin(h)*i},Aa=Sa;Ge.default=Aa;var $t={};Object.defineProperty($t,"__esModule",{value:!0});$t.default=void 0;var In=St(X),Gn=St(z),ie=St(Z),Oa=St(ue);function St(t){return t&&t.__esModule?t:{default:t}}var ka=function(e,r){var a=(0,In.default)(r),n=(0,Gn.default)(r),i=(0,In.default)(e),o=(0,Gn.default)(e),l=((0,Oa.default)(Math.atan2(Math.sin((0,ie.default)(n)-(0,ie.default)(o))*Math.cos((0,ie.default)(a)),Math.cos((0,ie.default)(i))*Math.sin((0,ie.default)(a))-Math.sin((0,ie.default)(i))*Math.cos((0,ie.default)(a))*Math.cos((0,ie.default)(n)-(0,ie.default)(o))))+360)%360;return l},Da=ka;$t.default=Da;var At={};Object.defineProperty(At,"__esModule",{value:!0});At.default=void 0;var Pa=xa(re);function xa(t){return t&&t.__esModule?t:{default:t}}function Ve(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ve=function(r){return typeof r}:Ve=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ve(t)}var ja=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pa.default;return e.reduce(function(a,n){return Ve(a)==="object"&&a.last!==null&&(a.distance+=r(n,a.last)),a.last=n,a},{last:null,distance:0}).distance},Ta=ja;At.default=Ta;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.default=void 0;var Un=cn(X),Kn=cn(z),qt=cn(Z),Wn=U;function cn(t){return t&&t.__esModule?t:{default:t}}var Ma=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;a=typeof a<"u"&&!isNaN(a)?a:1;var n=(0,Un.default)(e),i=(0,Kn.default)(e),o=(0,Un.default)(r),l=(0,Kn.default)(r),h=6356752314245e-6,c=1/298.257223563,s=(0,qt.default)(l-i),d,m,$,u,v,w,A=Math.atan((1-c)*Math.tan((0,qt.default)(parseFloat(n)))),g=Math.atan((1-c)*Math.tan((0,qt.default)(parseFloat(o)))),f=Math.sin(A),y=Math.cos(A),b=Math.sin(g),k=Math.cos(g),S=s,P,j=100;do{var E=Math.sin(S),T=Math.cos(S);if(w=Math.sqrt(k*E*(k*E)+(y*b-f*k*T)*(y*b-f*k*T)),w===0)return 0;d=f*b+y*k*T,m=Math.atan2(w,d),$=y*k*E/w,u=1-$*$,v=d-2*f*b/u,isNaN(v)&&(v=0);var _=c/16*u*(4+c*(4-3*u));P=S,S=s+(1-_)*c*$*(m+_*w*(v+_*d*(-1+2*v*v)))}while(Math.abs(S-P)>1e-12&&--j>0);if(j===0)return NaN;var p=u*(Wn.earthRadius*Wn.earthRadius-h*h)/(h*h),O=1+p/16384*(4096+p*(-768+p*(320-175*p))),D=p/1024*(256+p*(-128+p*(74-47*p))),C=D*w*(v+D/4*(d*(-1+2*v*v)-D/6*v*(-3+4*w*w)*(-3+4*v*v))),M=h*O*(m-C);return Math.round(M/a)*a},Ea=Ma;Ot.default=Ea;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.default=void 0;var Ca=function(e){if(/^NNE|NE|NNW|N$/.test(e))return"N";if(/^ENE|E|ESE|SE$/.test(e))return"E";if(/^SSE|S|SSW|SW$/.test(e))return"S";if(/^WSW|W|WNW|NW$/.test(e))return"W"},La=Ca;kt.default=La;var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.default=void 0;var Na=Ra(re);function Ra(t){return t&&t.__esModule?t:{default:t}}var Ba=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Na.default,n=a(e,r),i=Number(r.time)-Number(e.time),o=n/i*1e3;return o},Ia=Ba;Dt.default=Ia;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.default=void 0;var Ft=Ga(re);function Ga(t){return t&&t.__esModule?t:{default:t}}var Ua=function(e,r,a){return(0,Ft.default)(r,e)+(0,Ft.default)(e,a)===(0,Ft.default)(r,a)},Ka=Ua;Pt.default=Ka;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.default=void 0;var Je=pr(X),Y=pr(z);function pr(t){return t&&t.__esModule?t:{default:t}}var Wa=function(e,r){for(var a=!1,n=r.length,i=-1,o=n-1;++i<n;o=i)((0,Y.default)(r[i])<=(0,Y.default)(e)&&(0,Y.default)(e)<(0,Y.default)(r[o])||(0,Y.default)(r[o])<=(0,Y.default)(e)&&(0,Y.default)(e)<(0,Y.default)(r[i]))&&(0,Je.default)(e)<((0,Je.default)(r[o])-(0,Je.default)(r[i]))*((0,Y.default)(e)-(0,Y.default)(r[i]))/((0,Y.default)(r[o])-(0,Y.default)(r[i]))+(0,Je.default)(r[i])&&(a=!a);return a},qa=Wa;xt.default=qa;var jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.default=void 0;var Fa=Ja(Ge);function Ja(t){return t&&t.__esModule?t:{default:t}}var Ha=function(e,r,a,n){return(0,Fa.default)(e,r,a)<n},Va=Ha;jt.default=Va;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.default=void 0;var Xa=za(re);function za(t){return t&&t.__esModule?t:{default:t}}var Ya=function(e,r,a){return(0,Xa.default)(e,r)<a},Za=Ya;Tt.default=Za;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.default=void 0;function Qa(t,e){return ru(t)||nu(t,e)||tu(t,e)||eu()}function eu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tu(t,e){if(t){if(typeof t=="string")return qn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qn(t,e)}}function qn(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function nu(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],a=!0,n=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));a=!0);}catch(h){n=!0,i=h}finally{try{!a&&o.return!=null&&o.return()}finally{if(n)throw i}}return r}}function ru(t){if(Array.isArray(t))return t}var iu=function(e){if(!e.startsWith("POLYGON"))throw new Error("Invalid wkt.");var r=e.slice(e.indexOf("(")+2,e.indexOf(")")).split(", "),a=r.map(function(n){var i=n.split(" "),o=Qa(i,2),l=o[0],h=o[1];return{longitude:parseFloat(l),latitude:parseFloat(h)}});return a},ou=iu;Mt.default=ou;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(t,"computeDestinationPoint",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"convertArea",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"convertDistance",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"convertSpeed",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"decimalToSexagesimal",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"findNearest",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getAreaOfPolygon",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getBounds",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getBoundsOfDistance",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"getCenter",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"getCenterOfBounds",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"getCompassDirection",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(t,"getCoordinateKey",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"getCoordinateKeys",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"getDistance",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"getDistanceFromLine",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"getGreatCircleBearing",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"getLatitude",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"getLongitude",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"getPathLength",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"getPreciseDistance",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"getRhumbLineBearing",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"getRoughCompassDirection",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"getSpeed",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(t,"isDecimal",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"isPointInLine",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"isPointNearLine",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"isPointWithinRadius",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"isSexagesimal",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(t,"isValidCoordinate",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"isValidLatitude",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"isValidLongitude",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"orderByDistance",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(t,"sexagesimalToDecimal",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(t,"toDecimal",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"toRad",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(t,"toDeg",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(t,"wktToPolygon",{enumerable:!0,get:function(){return W.default}});var r=B(at),a=B(ft),n=B(st),i=B(lt),o=B(ct),l=B(dt),h=B(pt),c=B(Be),s=B(gt),d=B(yt),m=B(bt),$=B(wt),u=B(pe),v=B(Ae),w=B(re),A=B(Ge),g=B($t),f=B(X),y=B(z),b=B(At),k=B(Ot),S=B(Ie),P=B(kt),j=B(Dt),E=B(ge),T=B(Pt),_=B(xt),p=B(jt),O=B(Tt),D=B(ve),C=B(Me),M=B(Ee),x=B(Ce),L=B(Ne),N=B(ye),I=B(Se),G=B(Z),K=B(ue),W=B(Mt),J=U;Object.keys(J).forEach(function(R){R==="default"||R==="__esModule"||Object.prototype.hasOwnProperty.call(e,R)||Object.defineProperty(t,R,{enumerable:!0,get:function(){return J[R]}})});function B(R){return R&&R.__esModule?R:{default:R}}})(sr);const au=()=>{const t=r=>{let a={latitude:r.coords.latitude,longitude:r.coords.longitude};if(se.userLocation?.latitude&&se.userLocation?.longitude){const n=sr.getPreciseDistance(se.userLocation,a);if(console.log(`getUserLocationSuccess (diff: ${n}, lat: ${r.coords.latitude}, lon: ${r.coords.longitude}, acc: ${r.coords.accuracy})`,0),n<100)return}console.log(`getUserLocationSuccess (lat: ${r.coords.latitude}, lon: ${r.coords.longitude}, acc: ${r.coords.accuracy})`,0),si({latitude:r.coords.latitude,longitude:r.coords.longitude})},e=r=>{console.log(`getUserLocationError: ${r.message}`,0),navigator.geolocation.getCurrentPosition(t,e,{enableHighAccuracy:!1,maximumAge:1/0})};return De(()=>{let r=null;navigator.geolocation?navigator.permissions&&navigator.permissions.query?navigator.permissions.query({name:"geolocation"}).then(a=>{console.log(`Query geolocation result: ${a.state}`,0),a.state==="granted"?(navigator.geolocation.getCurrentPosition(t,e,{enableHighAccuracy:!1,timeout:2e3,maximumAge:1/0}),r=navigator.geolocation.watchPosition(t)):a.state==="prompt"?(navigator.geolocation.getCurrentPosition(t,e,{enableHighAccuracy:!0,timeout:6e4,maximumAge:0}),r=navigator.geolocation.watchPosition(t)):a.state,a.onchange=function(){console.log(`Query geolocation change: ${a.state}`,0)}}):(navigator.geolocation.getCurrentPosition(t,e,{enableHighAccuracy:!1,timeout:2e3,maximumAge:1/0}),r=navigator.geolocation.watchPosition(t)):console.log("geolocation not available",0),_e(()=>{r!==null&&navigator.geolocation.clearWatch(r)})}),null},uu=$e('<img alt="Circle Picture">'),fu=({circle:t,size:e,className:r})=>{const{picture:a}=t,n={width:e,height:e,borderRadius:"50%",objectFit:"cover"},i=o=>{const l=o.target;l.src="./images/default-circle-picture.png"};return(()=>{const o=uu();return o.addEventListener("error",i),er(o,"src",a),tr(o,r),te(l=>Vt(o,n,l)),o})()},su=$e('<div><h3 class="ml-3">'),lu=({circle:t,className:e,selectedCircle:r,onClick:a})=>{const n=()=>{a(t)};return(()=>{const i=su(),o=i.firstChild;return i.$$click=n,Pe(i,ae(fu,{circle:t,size:"40px"}),o),Pe(o,()=>t.name),te(()=>tr(i,`flex items-center p-3 cursor-pointer bg-white hover:bg-gray-100 transition-colors duration-200 ${r()===t?"bg-gray-200":""} ${e}`)),i})()};ot(["click"]);const cu=$e("<div>"),du=({onSelect:t})=>{const[e,r]=H([{name:"All",picture:"./images/all.png"}]),[a,n]=H(e()[0]),i=o=>{n(o),t(o)};return(()=>{const o=cu();return Pe(o,ae(xr,{get each(){return e()},children:l=>ae(lu,{circle:l,selectedCircle:a,onClick:i})})),o})()},hu=()=>{const[t,e]=H(window.innerWidth),[r,a]=H(window.innerHeight),n=()=>{e(window.innerWidth),a(window.innerHeight)};return De(()=>{window.addEventListener("resize",n),_e(()=>{window.removeEventListener("resize",n)})}),{windowWidth:t,windowHeight:r}},pu=$e('<div class="h-screen w-screen relative"><div class="h-full w-full md:w-72 relative"><div class="hidden md:block absolute right-0 top-0 h-full w-2 cursor-col-resize"></div></div><div class="h-full w-full md:w-full" style="background-color:#f5f5f5;"><button class="md:hidden bg-blue-500 text-white px-3 py-2 rounded">Back'),gu=()=>{const[t,e]=H(!1),[r,a]=H(18),[n,i]=H(!1),{windowWidth:o,windowHeight:l}=hu(),h=()=>{e(!t())},c=()=>{i(!0)},s=$=>{if(!n())return;const u=parseFloat(getComputedStyle(document.documentElement).fontSize),v=$.clientX/u;v<18?v<10?a(4):a(18):a(v)},d=()=>{i(!1)};De(()=>{n()?(window.addEventListener("mousemove",s),window.addEventListener("mouseup",d)):(window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",d))}),_e(()=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",d)});const m=$=>{console.log($),o()<768&&e(!0)};return[(()=>{const $=pu(),u=$.firstChild,v=u.firstChild,w=u.nextSibling,A=w.firstChild;return Pe(u,ae(du,{onSelect:m}),v),v.$$mousedown=c,A.$$click=h,te(g=>{const f=`display: flex; flex-direction: row; min-width: 200%; transition: transform 300ms ease; transform: translateX(${t()?"-50%":"0"});`,y=o()>=768?`width: ${r()}rem; max-width: ${r()}rem; min-width: ${r()}rem;`:"width: 100%;";return g._v$=Vt($,f,g._v$),g._v$2=Vt(u,y,g._v$2),g},{_v$:void 0,_v$2:void 0}),$})(),ae(hi,{}),ae(au,{})]};ot(["mousedown","click"]);const vu=document.getElementById("root");Tr(()=>ae(Zr,{get children(){return ae(gu,{})}}),vu);
